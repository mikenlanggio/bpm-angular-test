{"ast":null,"code":"import inherits from 'inherits-browser';\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\nimport { filter } from 'min-dash';\nimport { is } from '../../util/ModelUtil';\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\n\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\ninherits(BpmnEditorActions, EditorActions);\nBpmnEditorActions.$inject = ['injector'];\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\n\nBpmnEditorActions.prototype._registerDefaultActions = function (injector) {\n  // (0) invoke super method\n  EditorActions.prototype._registerDefaultActions.call(this, injector); // (1) retrieve optional components to integrate with\n\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false); // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function () {\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n      var elements = elementRegistry.filter(function (element) {\n        return element !== rootElement;\n      });\n      selection.select(elements);\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function () {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function () {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function () {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function () {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function (opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function (opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function (element) {\n          return !is(element, 'bpmn:Lane');\n        });\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function (opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function () {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function () {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function () {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function (element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function (element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n      modeling.moveElements(elements, {\n        x: -boundingBox.x,\n        y: -boundingBox.y\n      }, rootElement);\n    });\n  }\n};","map":{"version":3,"names":["inherits","EditorActions","filter","is","getBBox","BpmnEditorActions","injector","invoke","$inject","prototype","_registerDefaultActions","call","canvas","get","elementRegistry","selection","spaceTool","lassoTool","handTool","globalConnect","distributeElements","alignElements","directEditing","searchPad","modeling","_registerAction","rootElement","getRootElement","elements","element","select","toggle","opts","currentSelection","type","length","trigger","aligneableElements","setColor","activate","boundingBox","parent","moveElements","x","y"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/editor-actions/BpmnEditorActions.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport EditorActions from 'diagram-js/lib/features/editor-actions/EditorActions';\n\nimport { filter } from 'min-dash';\n\nimport { is } from '../../util/ModelUtil';\n\nimport {\n  getBBox\n} from 'diagram-js/lib/util/Elements';\n\n\n/**\n * Registers and executes BPMN specific editor actions.\n *\n * @param {Injector} injector\n */\nexport default function BpmnEditorActions(injector) {\n  injector.invoke(EditorActions, this);\n}\n\ninherits(BpmnEditorActions, EditorActions);\n\nBpmnEditorActions.$inject = [\n  'injector'\n];\n\n/**\n * Register default actions.\n *\n * @param {Injector} injector\n */\nBpmnEditorActions.prototype._registerDefaultActions = function(injector) {\n\n  // (0) invoke super method\n\n  EditorActions.prototype._registerDefaultActions.call(this, injector);\n\n  // (1) retrieve optional components to integrate with\n\n  var canvas = injector.get('canvas', false);\n  var elementRegistry = injector.get('elementRegistry', false);\n  var selection = injector.get('selection', false);\n  var spaceTool = injector.get('spaceTool', false);\n  var lassoTool = injector.get('lassoTool', false);\n  var handTool = injector.get('handTool', false);\n  var globalConnect = injector.get('globalConnect', false);\n  var distributeElements = injector.get('distributeElements', false);\n  var alignElements = injector.get('alignElements', false);\n  var directEditing = injector.get('directEditing', false);\n  var searchPad = injector.get('searchPad', false);\n  var modeling = injector.get('modeling', false);\n\n  // (2) check components and register actions\n\n  if (canvas && elementRegistry && selection) {\n    this._registerAction('selectElements', function() {\n\n      // select all elements except for the invisible\n      // root element\n      var rootElement = canvas.getRootElement();\n\n      var elements = elementRegistry.filter(function(element) {\n        return element !== rootElement;\n      });\n\n      selection.select(elements);\n\n      return elements;\n    });\n  }\n\n  if (spaceTool) {\n    this._registerAction('spaceTool', function() {\n      spaceTool.toggle();\n    });\n  }\n\n  if (lassoTool) {\n    this._registerAction('lassoTool', function() {\n      lassoTool.toggle();\n    });\n  }\n\n  if (handTool) {\n    this._registerAction('handTool', function() {\n      handTool.toggle();\n    });\n  }\n\n  if (globalConnect) {\n    this._registerAction('globalConnectTool', function() {\n      globalConnect.toggle();\n    });\n  }\n\n  if (selection && distributeElements) {\n    this._registerAction('distributeElements', function(opts) {\n      var currentSelection = selection.get(),\n          type = opts.type;\n\n      if (currentSelection.length) {\n        distributeElements.trigger(currentSelection, type);\n      }\n    });\n  }\n\n  if (selection && alignElements) {\n    this._registerAction('alignElements', function(opts) {\n      var currentSelection = selection.get(),\n          aligneableElements = [],\n          type = opts.type;\n\n      if (currentSelection.length) {\n        aligneableElements = filter(currentSelection, function(element) {\n          return !is(element, 'bpmn:Lane');\n        });\n\n        alignElements.trigger(aligneableElements, type);\n      }\n    });\n  }\n\n  if (selection && modeling) {\n    this._registerAction('setColor', function(opts) {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        modeling.setColor(currentSelection, opts);\n      }\n    });\n  }\n\n  if (selection && directEditing) {\n    this._registerAction('directEditing', function() {\n      var currentSelection = selection.get();\n\n      if (currentSelection.length) {\n        directEditing.activate(currentSelection[0]);\n      }\n    });\n  }\n\n  if (searchPad) {\n    this._registerAction('find', function() {\n      searchPad.toggle();\n    });\n  }\n\n  if (canvas && modeling) {\n    this._registerAction('moveToOrigin', function() {\n      var rootElement = canvas.getRootElement(),\n          boundingBox,\n          elements;\n\n      if (is(rootElement, 'bpmn:Collaboration')) {\n        elements = elementRegistry.filter(function(element) {\n          return is(element.parent, 'bpmn:Collaboration');\n        });\n      } else {\n        elements = elementRegistry.filter(function(element) {\n          return element !== rootElement && !is(element.parent, 'bpmn:SubProcess');\n        });\n      }\n\n      boundingBox = getBBox(elements);\n\n      modeling.moveElements(\n        elements,\n        { x: -boundingBox.x, y: -boundingBox.y },\n        rootElement\n      );\n    });\n  }\n\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}