{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\nimport { isLabel } from '../../../util/LabelUtil';\nimport { getBBox } from 'diagram-js/lib/util/Elements';\nimport { assign, find } from 'min-dash';\nimport { asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\nvar HORIZONTAL_PARTICIPANT_PADDING = 20,\n    VERTICAL_PARTICIPANT_PADDING = 20;\nexport var PARTICIPANT_BORDER_WIDTH = 30;\nvar HIGH_PRIORITY = 2000;\n/**\n * BPMN-specific behavior for creating participants.\n */\n\nexport default function CreateParticipantBehavior(canvas, eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus); // fit participant\n\n  eventBus.on(['create.start', 'shape.move.start'], HIGH_PRIORITY, function (event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement();\n\n    if (!is(shape, 'bpmn:Participant') || !is(rootElement, 'bpmn:Process') || !rootElement.children.length) {\n      return;\n    } // ignore connections, groups and labels\n\n\n    var children = rootElement.children.filter(function (element) {\n      return !is(element, 'bpmn:Group') && !isLabel(element) && !isConnection(element);\n    }); // ensure for available children to calculate bounds\n\n    if (!children.length) {\n      return;\n    }\n\n    var childrenBBox = getBBox(children);\n    var participantBounds = getParticipantBounds(shape, childrenBBox); // assign width and height\n\n    assign(shape, participantBounds); // assign create constraints\n\n    context.createConstraints = getParticipantCreateConstraints(shape, childrenBBox);\n  }); // force hovering process when creating first participant\n\n  eventBus.on('create.start', HIGH_PRIORITY, function (event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement(),\n        rootElementGfx = canvas.getGraphics(rootElement);\n\n    function ensureHoveringProcess(event) {\n      event.element = rootElement;\n      event.gfx = rootElementGfx;\n    }\n\n    if (is(shape, 'bpmn:Participant') && is(rootElement, 'bpmn:Process')) {\n      eventBus.on('element.hover', HIGH_PRIORITY, ensureHoveringProcess);\n      eventBus.once('create.cleanup', function () {\n        eventBus.off('element.hover', ensureHoveringProcess);\n      });\n    }\n  }); // turn process into collaboration when creating first participant\n\n  function getOrCreateCollaboration() {\n    var rootElement = canvas.getRootElement();\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      return rootElement;\n    }\n\n    return modeling.makeCollaboration();\n  } // when creating mutliple elements through `elements.create` parent must be set to collaboration\n  // and passed to `shape.create` as hint\n\n\n  this.preExecute('elements.create', HIGH_PRIORITY, function (context) {\n    var elements = context.elements,\n        parent = context.parent,\n        participant = findParticipant(elements),\n        hints;\n\n    if (participant && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n      hints = context.hints = context.hints || {};\n      hints.participant = participant;\n      hints.process = parent;\n      hints.processRef = getBusinessObject(participant).get('processRef');\n    }\n  }, true); // when creating single shape through `shape.create` parent must be set to collaboration\n  // unless it was already set through `elements.create`\n\n  this.preExecute('shape.create', function (context) {\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Participant') && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n      context.process = parent;\n      context.processRef = getBusinessObject(shape).get('processRef');\n    }\n  }, true); // #execute necessary because #preExecute not called on CommandStack#redo\n\n  this.execute('shape.create', function (context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        shape = context.shape,\n        participant = hints.participant; // both shape.create and elements.create must be handled\n\n    if (process && (!participant || shape === participant)) {\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', getBusinessObject(process));\n    }\n  }, true);\n  this.revert('shape.create', function (context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        processRef = context.processRef || hints.processRef,\n        shape = context.shape,\n        participant = hints.participant; // both shape.create and elements.create must be handled\n\n    if (process && (!participant || shape === participant)) {\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', processRef);\n    }\n  }, true);\n  this.postExecute('shape.create', function (context) {\n    var hints = context.hints || {},\n        process = context.process || context.hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    if (process) {\n      var children = process.children.slice(); // both shape.create and elements.create must be handled\n\n      if (!participant) {\n        modeling.moveElements(children, {\n          x: 0,\n          y: 0\n        }, shape);\n      } else if (shape === participant) {\n        modeling.moveElements(children, {\n          x: 0,\n          y: 0\n        }, participant);\n      }\n    }\n  }, true);\n}\nCreateParticipantBehavior.$inject = ['canvas', 'eventBus', 'modeling'];\ninherits(CreateParticipantBehavior, CommandInterceptor); // helpers //////////\n\nfunction getParticipantBounds(shape, childrenBBox) {\n  childrenBBox = {\n    width: childrenBBox.width + HORIZONTAL_PARTICIPANT_PADDING * 2 + PARTICIPANT_BORDER_WIDTH,\n    height: childrenBBox.height + VERTICAL_PARTICIPANT_PADDING * 2\n  };\n  var width = Math.max(shape.width, childrenBBox.width),\n      height = Math.max(shape.height, childrenBBox.height);\n  return {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getParticipantCreateConstraints(shape, childrenBBox) {\n  childrenBBox = asTRBL(childrenBBox);\n  return {\n    bottom: childrenBBox.top + shape.height / 2 - VERTICAL_PARTICIPANT_PADDING,\n    left: childrenBBox.right - shape.width / 2 + HORIZONTAL_PARTICIPANT_PADDING,\n    top: childrenBBox.bottom - shape.height / 2 + VERTICAL_PARTICIPANT_PADDING,\n    right: childrenBBox.left + shape.width / 2 - HORIZONTAL_PARTICIPANT_PADDING - PARTICIPANT_BORDER_WIDTH\n  };\n}\n\nfunction isConnection(element) {\n  return !!element.waypoints;\n}\n\nfunction findParticipant(elements) {\n  return find(elements, function (element) {\n    return is(element, 'bpmn:Participant');\n  });\n}","map":{"version":3,"names":["inherits","CommandInterceptor","getBusinessObject","is","isLabel","getBBox","assign","find","asTRBL","HORIZONTAL_PARTICIPANT_PADDING","VERTICAL_PARTICIPANT_PADDING","PARTICIPANT_BORDER_WIDTH","HIGH_PRIORITY","CreateParticipantBehavior","canvas","eventBus","modeling","call","on","event","context","shape","rootElement","getRootElement","children","length","filter","element","isConnection","childrenBBox","participantBounds","getParticipantBounds","createConstraints","getParticipantCreateConstraints","rootElementGfx","getGraphics","ensureHoveringProcess","gfx","once","off","getOrCreateCollaboration","makeCollaboration","preExecute","elements","parent","participant","findParticipant","hints","process","processRef","get","execute","set","revert","postExecute","slice","moveElements","x","y","$inject","width","height","Math","max","bottom","top","left","right","waypoints"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/modeling/behavior/CreateParticipantBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { getBusinessObject, is } from '../../../util/ModelUtil';\n\nimport { isLabel } from '../../../util/LabelUtil';\n\nimport { getBBox } from 'diagram-js/lib/util/Elements';\n\nimport {\n  assign,\n  find\n} from 'min-dash';\n\nimport { asTRBL } from 'diagram-js/lib/layout/LayoutUtil';\n\nvar HORIZONTAL_PARTICIPANT_PADDING = 20,\n    VERTICAL_PARTICIPANT_PADDING = 20;\n\nexport var PARTICIPANT_BORDER_WIDTH = 30;\n\nvar HIGH_PRIORITY = 2000;\n\n\n/**\n * BPMN-specific behavior for creating participants.\n */\nexport default function CreateParticipantBehavior(canvas, eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n\n  // fit participant\n  eventBus.on([\n    'create.start',\n    'shape.move.start'\n  ], HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement();\n\n    if (!is(shape, 'bpmn:Participant') ||\n      !is(rootElement, 'bpmn:Process') ||\n      !rootElement.children.length) {\n      return;\n    }\n\n    // ignore connections, groups and labels\n    var children = rootElement.children.filter(function(element) {\n      return !is(element, 'bpmn:Group') &&\n        !isLabel(element) &&\n        !isConnection(element);\n    });\n\n    // ensure for available children to calculate bounds\n    if (!children.length) {\n      return;\n    }\n\n    var childrenBBox = getBBox(children);\n\n    var participantBounds = getParticipantBounds(shape, childrenBBox);\n\n    // assign width and height\n    assign(shape, participantBounds);\n\n    // assign create constraints\n    context.createConstraints = getParticipantCreateConstraints(shape, childrenBBox);\n  });\n\n  // force hovering process when creating first participant\n  eventBus.on('create.start', HIGH_PRIORITY, function(event) {\n    var context = event.context,\n        shape = context.shape,\n        rootElement = canvas.getRootElement(),\n        rootElementGfx = canvas.getGraphics(rootElement);\n\n    function ensureHoveringProcess(event) {\n      event.element = rootElement;\n      event.gfx = rootElementGfx;\n    }\n\n    if (is(shape, 'bpmn:Participant') && is(rootElement, 'bpmn:Process')) {\n      eventBus.on('element.hover', HIGH_PRIORITY, ensureHoveringProcess);\n\n      eventBus.once('create.cleanup', function() {\n        eventBus.off('element.hover', ensureHoveringProcess);\n      });\n    }\n  });\n\n  // turn process into collaboration when creating first participant\n  function getOrCreateCollaboration() {\n    var rootElement = canvas.getRootElement();\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      return rootElement;\n    }\n\n    return modeling.makeCollaboration();\n  }\n\n  // when creating mutliple elements through `elements.create` parent must be set to collaboration\n  // and passed to `shape.create` as hint\n  this.preExecute('elements.create', HIGH_PRIORITY, function(context) {\n    var elements = context.elements,\n        parent = context.parent,\n        participant = findParticipant(elements),\n        hints;\n\n    if (participant && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n\n      hints = context.hints = context.hints || {};\n\n      hints.participant = participant;\n      hints.process = parent;\n      hints.processRef = getBusinessObject(participant).get('processRef');\n    }\n  }, true);\n\n  // when creating single shape through `shape.create` parent must be set to collaboration\n  // unless it was already set through `elements.create`\n  this.preExecute('shape.create', function(context) {\n    var parent = context.parent,\n        shape = context.shape;\n\n    if (is(shape, 'bpmn:Participant') && is(parent, 'bpmn:Process')) {\n      context.parent = getOrCreateCollaboration();\n\n      context.process = parent;\n      context.processRef = getBusinessObject(shape).get('processRef');\n    }\n  }, true);\n\n  // #execute necessary because #preExecute not called on CommandStack#redo\n  this.execute('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', getBusinessObject(process));\n    }\n  }, true);\n\n  this.revert('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || hints.process,\n        processRef = context.processRef || hints.processRef,\n        shape = context.shape,\n        participant = hints.participant;\n\n    // both shape.create and elements.create must be handled\n    if (process && (!participant || shape === participant)) {\n\n      // monkey-patch process ref\n      getBusinessObject(shape).set('processRef', processRef);\n    }\n  }, true);\n\n  this.postExecute('shape.create', function(context) {\n    var hints = context.hints || {},\n        process = context.process || context.hints.process,\n        shape = context.shape,\n        participant = hints.participant;\n\n    if (process) {\n      var children = process.children.slice();\n\n      // both shape.create and elements.create must be handled\n      if (!participant) {\n        modeling.moveElements(children, { x: 0, y: 0 }, shape);\n      } else if (shape === participant) {\n        modeling.moveElements(children, { x: 0, y: 0 }, participant);\n      }\n    }\n  }, true);\n}\n\nCreateParticipantBehavior.$inject = [\n  'canvas',\n  'eventBus',\n  'modeling'\n];\n\ninherits(CreateParticipantBehavior, CommandInterceptor);\n\n// helpers //////////\n\nfunction getParticipantBounds(shape, childrenBBox) {\n  childrenBBox = {\n    width: childrenBBox.width + HORIZONTAL_PARTICIPANT_PADDING * 2 + PARTICIPANT_BORDER_WIDTH,\n    height: childrenBBox.height + VERTICAL_PARTICIPANT_PADDING * 2\n  };\n\n  var width = Math.max(shape.width, childrenBBox.width),\n      height = Math.max(shape.height, childrenBBox.height);\n\n  return {\n    x: -width / 2,\n    y: -height / 2,\n    width: width,\n    height: height\n  };\n}\n\nfunction getParticipantCreateConstraints(shape, childrenBBox) {\n  childrenBBox = asTRBL(childrenBBox);\n\n  return {\n    bottom: childrenBBox.top + shape.height / 2 - VERTICAL_PARTICIPANT_PADDING,\n    left: childrenBBox.right - shape.width / 2 + HORIZONTAL_PARTICIPANT_PADDING,\n    top: childrenBBox.bottom - shape.height / 2 + VERTICAL_PARTICIPANT_PADDING,\n    right: childrenBBox.left + shape.width / 2 - HORIZONTAL_PARTICIPANT_PADDING - PARTICIPANT_BORDER_WIDTH\n  };\n}\n\nfunction isConnection(element) {\n  return !!element.waypoints;\n}\n\nfunction findParticipant(elements) {\n  return find(elements, function(element) {\n    return is(element, 'bpmn:Participant');\n  });\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}