{"ast":null,"code":"import { assign, forEach } from 'min-dash';\nimport { getResizedSourceAnchor, getResizedTargetAnchor } from './helper/AnchorsHelper';\n/**\n * A handler that implements reversible resizing of shapes.\n *\n * @param {Modeling} modeling\n */\n\nexport default function ResizeShapeHandler(modeling) {\n  this._modeling = modeling;\n}\nResizeShapeHandler.$inject = ['modeling'];\n/**\n * {\n *   shape: {....}\n *   newBounds: {\n *     width:  20,\n *     height: 40,\n *     x:       5,\n *     y:      10\n *   }\n *\n * }\n */\n\nResizeShapeHandler.prototype.execute = function (context) {\n  var shape = context.shape,\n      newBounds = context.newBounds,\n      minBounds = context.minBounds;\n\n  if (newBounds.x === undefined || newBounds.y === undefined || newBounds.width === undefined || newBounds.height === undefined) {\n    throw new Error('newBounds must have {x, y, width, height} properties');\n  }\n\n  if (minBounds && (newBounds.width < minBounds.width || newBounds.height < minBounds.height)) {\n    throw new Error('width and height cannot be less than minimum height and width');\n  } else if (!minBounds && newBounds.width < 10 || newBounds.height < 10) {\n    throw new Error('width and height cannot be less than 10px');\n  } // save old bbox in context\n\n\n  context.oldBounds = {\n    width: shape.width,\n    height: shape.height,\n    x: shape.x,\n    y: shape.y\n  }; // update shape\n\n  assign(shape, {\n    width: newBounds.width,\n    height: newBounds.height,\n    x: newBounds.x,\n    y: newBounds.y\n  });\n  return shape;\n};\n\nResizeShapeHandler.prototype.postExecute = function (context) {\n  var modeling = this._modeling;\n  var shape = context.shape,\n      oldBounds = context.oldBounds,\n      hints = context.hints || {};\n\n  if (hints.layout === false) {\n    return;\n  }\n\n  forEach(shape.incoming, function (c) {\n    modeling.layoutConnection(c, {\n      connectionEnd: getResizedTargetAnchor(c, shape, oldBounds)\n    });\n  });\n  forEach(shape.outgoing, function (c) {\n    modeling.layoutConnection(c, {\n      connectionStart: getResizedSourceAnchor(c, shape, oldBounds)\n    });\n  });\n};\n\nResizeShapeHandler.prototype.revert = function (context) {\n  var shape = context.shape,\n      oldBounds = context.oldBounds; // restore previous bbox\n\n  assign(shape, {\n    width: oldBounds.width,\n    height: oldBounds.height,\n    x: oldBounds.x,\n    y: oldBounds.y\n  });\n  return shape;\n};","map":{"version":3,"names":["assign","forEach","getResizedSourceAnchor","getResizedTargetAnchor","ResizeShapeHandler","modeling","_modeling","$inject","prototype","execute","context","shape","newBounds","minBounds","x","undefined","y","width","height","Error","oldBounds","postExecute","hints","layout","incoming","c","layoutConnection","connectionEnd","outgoing","connectionStart","revert"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/diagram-js/lib/features/modeling/cmd/ResizeShapeHandler.js"],"sourcesContent":["import {\n  assign,\n  forEach\n} from 'min-dash';\n\nimport {\n  getResizedSourceAnchor,\n  getResizedTargetAnchor\n} from './helper/AnchorsHelper';\n\n\n/**\n * A handler that implements reversible resizing of shapes.\n *\n * @param {Modeling} modeling\n */\nexport default function ResizeShapeHandler(modeling) {\n  this._modeling = modeling;\n}\n\nResizeShapeHandler.$inject = [ 'modeling' ];\n\n/**\n * {\n *   shape: {....}\n *   newBounds: {\n *     width:  20,\n *     height: 40,\n *     x:       5,\n *     y:      10\n *   }\n *\n * }\n */\nResizeShapeHandler.prototype.execute = function(context) {\n  var shape = context.shape,\n      newBounds = context.newBounds,\n      minBounds = context.minBounds;\n\n  if (newBounds.x === undefined || newBounds.y === undefined ||\n      newBounds.width === undefined || newBounds.height === undefined) {\n    throw new Error('newBounds must have {x, y, width, height} properties');\n  }\n\n  if (minBounds && (newBounds.width < minBounds.width\n    || newBounds.height < minBounds.height)) {\n    throw new Error('width and height cannot be less than minimum height and width');\n  } else if (!minBounds\n    && newBounds.width < 10 || newBounds.height < 10) {\n    throw new Error('width and height cannot be less than 10px');\n  }\n\n  // save old bbox in context\n  context.oldBounds = {\n    width:  shape.width,\n    height: shape.height,\n    x:      shape.x,\n    y:      shape.y\n  };\n\n  // update shape\n  assign(shape, {\n    width:  newBounds.width,\n    height: newBounds.height,\n    x:      newBounds.x,\n    y:      newBounds.y\n  });\n\n  return shape;\n};\n\nResizeShapeHandler.prototype.postExecute = function(context) {\n  var modeling = this._modeling;\n\n  var shape = context.shape,\n      oldBounds = context.oldBounds,\n      hints = context.hints || {};\n\n  if (hints.layout === false) {\n    return;\n  }\n\n  forEach(shape.incoming, function(c) {\n    modeling.layoutConnection(c, {\n      connectionEnd: getResizedTargetAnchor(c, shape, oldBounds)\n    });\n  });\n\n  forEach(shape.outgoing, function(c) {\n    modeling.layoutConnection(c, {\n      connectionStart: getResizedSourceAnchor(c, shape, oldBounds)\n    });\n  });\n\n};\n\nResizeShapeHandler.prototype.revert = function(context) {\n\n  var shape = context.shape,\n      oldBounds = context.oldBounds;\n\n  // restore previous bbox\n  assign(shape, {\n    width:  oldBounds.width,\n    height: oldBounds.height,\n    x:      oldBounds.x,\n    y:      oldBounds.y\n  });\n\n  return shape;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}