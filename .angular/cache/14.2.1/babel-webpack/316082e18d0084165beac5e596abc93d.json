{"ast":null,"code":"import { assign, forEach, isArray, every } from 'min-dash';\nimport { is } from '../../util/ModelUtil';\nimport { isExpanded, isEventSubProcess } from '../../util/DiUtil';\nimport { isAny } from '../modeling/util/ModelingUtil';\nimport { getChildLanes } from '../modeling/util/LaneUtil';\nimport { hasPrimaryModifier } from 'diagram-js/lib/util/Mouse';\n/**\n * A provider for BPMN 2.0 elements context pad\n */\n\nexport default function ContextPadProvider(config, injector, eventBus, contextPad, modeling, elementFactory, connect, create, popupMenu, canvas, rules, translate) {\n  config = config || {};\n  contextPad.registerProvider(this);\n  this._contextPad = contextPad;\n  this._modeling = modeling;\n  this._elementFactory = elementFactory;\n  this._connect = connect;\n  this._create = create;\n  this._popupMenu = popupMenu;\n  this._canvas = canvas;\n  this._rules = rules;\n  this._translate = translate;\n\n  if (config.autoPlace !== false) {\n    this._autoPlace = injector.get('autoPlace', false);\n  }\n\n  eventBus.on('create.end', 250, function (event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (!hasPrimaryModifier(event) || !contextPad.isOpen(shape)) {\n      return;\n    }\n\n    var entries = contextPad.getEntries(shape);\n\n    if (entries.replace) {\n      entries.replace.action.click(event, shape);\n    }\n  });\n}\nContextPadProvider.$inject = ['config.contextPad', 'injector', 'eventBus', 'contextPad', 'modeling', 'elementFactory', 'connect', 'create', 'popupMenu', 'canvas', 'rules', 'translate'];\n\nContextPadProvider.prototype.getMultiElementContextPadEntries = function (elements) {\n  var modeling = this._modeling;\n  var actions = {};\n\n  if (this._isDeleteAllowed(elements)) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: this._translate('Remove'),\n        action: {\n          click: function (event, elements) {\n            modeling.removeElements(elements.slice());\n          }\n        }\n      }\n    });\n  }\n\n  return actions;\n};\n/**\n * @param {djs.model.Base[]} elements\n * @return {boolean}\n */\n\n\nContextPadProvider.prototype._isDeleteAllowed = function (elements) {\n  var baseAllowed = this._rules.allowed('elements.delete', {\n    elements: elements\n  });\n\n  if (isArray(baseAllowed)) {\n    return every(baseAllowed, function (element) {\n      return includes(baseAllowed, element);\n    });\n  }\n\n  return baseAllowed;\n};\n\nContextPadProvider.prototype.getContextPadEntries = function (element) {\n  var contextPad = this._contextPad,\n      modeling = this._modeling,\n      elementFactory = this._elementFactory,\n      connect = this._connect,\n      create = this._create,\n      popupMenu = this._popupMenu,\n      canvas = this._canvas,\n      rules = this._rules,\n      autoPlace = this._autoPlace,\n      translate = this._translate;\n  var actions = {};\n\n  if (element.type === 'label') {\n    return actions;\n  }\n\n  var businessObject = element.businessObject;\n\n  function startConnect(event, element) {\n    connect.start(event, element);\n  }\n\n  function removeElement(e, element) {\n    modeling.removeElements([element]);\n  }\n\n  function getReplaceMenuPosition(element) {\n    var Y_OFFSET = 5;\n    var diagramContainer = canvas.getContainer(),\n        pad = contextPad.getPad(element).html;\n    var diagramRect = diagramContainer.getBoundingClientRect(),\n        padRect = pad.getBoundingClientRect();\n    var top = padRect.top - diagramRect.top;\n    var left = padRect.left - diagramRect.left;\n    var pos = {\n      x: left,\n      y: top + padRect.height + Y_OFFSET\n    };\n    return pos;\n  }\n  /**\n   * Create an append action\n   *\n   * @param {string} type\n   * @param {string} className\n   * @param {string} [title]\n   * @param {Object} [options]\n   *\n   * @return {Object} descriptor\n   */\n\n\n  function appendAction(type, className, title, options) {\n    if (typeof title !== 'string') {\n      options = title;\n      title = translate('Append {type}', {\n        type: type.replace(/^bpmn:/, '')\n      });\n    }\n\n    function appendStart(event, element) {\n      var shape = elementFactory.createShape(assign({\n        type: type\n      }, options));\n      create.start(event, shape, {\n        source: element\n      });\n    }\n\n    var append = autoPlace ? function (event, element) {\n      var shape = elementFactory.createShape(assign({\n        type: type\n      }, options));\n      autoPlace.append(element, shape);\n    } : appendStart;\n    return {\n      group: 'model',\n      className: className,\n      title: title,\n      action: {\n        dragstart: appendStart,\n        click: append\n      }\n    };\n  }\n\n  function splitLaneHandler(count) {\n    return function (event, element) {\n      // actual split\n      modeling.splitLane(element, count); // refresh context pad after split to\n      // get rid of split icons\n\n      contextPad.open(element, true);\n    };\n  }\n\n  if (isAny(businessObject, ['bpmn:Lane', 'bpmn:Participant']) && isExpanded(element)) {\n    var childLanes = getChildLanes(element);\n    assign(actions, {\n      'lane-insert-above': {\n        group: 'lane-insert-above',\n        className: 'bpmn-icon-lane-insert-above',\n        title: translate('Add Lane above'),\n        action: {\n          click: function (event, element) {\n            modeling.addLane(element, 'top');\n          }\n        }\n      }\n    });\n\n    if (childLanes.length < 2) {\n      if (element.height >= 120) {\n        assign(actions, {\n          'lane-divide-two': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-two',\n            title: translate('Divide into two Lanes'),\n            action: {\n              click: splitLaneHandler(2)\n            }\n          }\n        });\n      }\n\n      if (element.height >= 180) {\n        assign(actions, {\n          'lane-divide-three': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-three',\n            title: translate('Divide into three Lanes'),\n            action: {\n              click: splitLaneHandler(3)\n            }\n          }\n        });\n      }\n    }\n\n    assign(actions, {\n      'lane-insert-below': {\n        group: 'lane-insert-below',\n        className: 'bpmn-icon-lane-insert-below',\n        title: translate('Add Lane below'),\n        action: {\n          click: function (event, element) {\n            modeling.addLane(element, 'bottom');\n          }\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:FlowNode')) {\n    if (is(businessObject, 'bpmn:EventBasedGateway')) {\n      assign(actions, {\n        'append.receive-task': appendAction('bpmn:ReceiveTask', 'bpmn-icon-receive-task', translate('Append ReceiveTask')),\n        'append.message-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-message', translate('Append MessageIntermediateCatchEvent'), {\n          eventDefinitionType: 'bpmn:MessageEventDefinition'\n        }),\n        'append.timer-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-timer', translate('Append TimerIntermediateCatchEvent'), {\n          eventDefinitionType: 'bpmn:TimerEventDefinition'\n        }),\n        'append.condition-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-condition', translate('Append ConditionIntermediateCatchEvent'), {\n          eventDefinitionType: 'bpmn:ConditionalEventDefinition'\n        }),\n        'append.signal-intermediate-event': appendAction('bpmn:IntermediateCatchEvent', 'bpmn-icon-intermediate-event-catch-signal', translate('Append SignalIntermediateCatchEvent'), {\n          eventDefinitionType: 'bpmn:SignalEventDefinition'\n        })\n      });\n    } else if (isEventType(businessObject, 'bpmn:BoundaryEvent', 'bpmn:CompensateEventDefinition')) {\n      assign(actions, {\n        'append.compensation-activity': appendAction('bpmn:Task', 'bpmn-icon-task', translate('Append compensation activity'), {\n          isForCompensation: true\n        })\n      });\n    } else if (!is(businessObject, 'bpmn:EndEvent') && !businessObject.isForCompensation && !isEventType(businessObject, 'bpmn:IntermediateThrowEvent', 'bpmn:LinkEventDefinition') && !isEventSubProcess(businessObject)) {\n      assign(actions, {\n        'append.end-event': appendAction('bpmn:EndEvent', 'bpmn-icon-end-event-none', translate('Append EndEvent')),\n        'append.gateway': appendAction('bpmn:ExclusiveGateway', 'bpmn-icon-gateway-none', translate('Append Gateway')),\n        'append.append-task': appendAction('bpmn:Task', 'bpmn-icon-task', translate('Append Task')),\n        'append.intermediate-event': appendAction('bpmn:IntermediateThrowEvent', 'bpmn-icon-intermediate-event-none', translate('Append Intermediate/Boundary Event'))\n      });\n    }\n  }\n\n  if (!popupMenu.isEmpty(element, 'bpmn-replace')) {\n    // Replace menu entry\n    assign(actions, {\n      'replace': {\n        group: 'edit',\n        className: 'bpmn-icon-screw-wrench',\n        title: translate('Change type'),\n        action: {\n          click: function (event, element) {\n            var position = assign(getReplaceMenuPosition(element), {\n              cursor: {\n                x: event.x,\n                y: event.y\n              }\n            });\n            popupMenu.open(element, 'bpmn-replace', position);\n          }\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation')\n    });\n  }\n\n  if (isAny(businessObject, ['bpmn:FlowNode', 'bpmn:InteractionNode', 'bpmn:DataObjectReference', 'bpmn:DataStoreReference'])) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation'),\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using ' + (businessObject.isForCompensation ? '' : 'Sequence/MessageFlow or ') + 'Association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:TextAnnotation')) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using Association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (isAny(businessObject, ['bpmn:DataObjectReference', 'bpmn:DataStoreReference'])) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using DataInputAssociation'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:Group')) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation')\n    });\n  } // delete element entry, only show if allowed by rules\n\n\n  var deleteAllowed = rules.allowed('elements.delete', {\n    elements: [element]\n  });\n\n  if (isArray(deleteAllowed)) {\n    // was the element returned as a deletion candidate?\n    deleteAllowed = deleteAllowed[0] === element;\n  }\n\n  if (deleteAllowed) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: translate('Remove'),\n        action: {\n          click: removeElement\n        }\n      }\n    });\n  }\n\n  return actions;\n}; // helpers /////////\n\n\nfunction isEventType(eventBo, type, definition) {\n  var isType = eventBo.$instanceOf(type);\n  var isDefinition = false;\n  var definitions = eventBo.eventDefinitions || [];\n  forEach(definitions, function (def) {\n    if (def.$type === definition) {\n      isDefinition = true;\n    }\n  });\n  return isType && isDefinition;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}","map":{"version":3,"names":["assign","forEach","isArray","every","is","isExpanded","isEventSubProcess","isAny","getChildLanes","hasPrimaryModifier","ContextPadProvider","config","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","registerProvider","_contextPad","_modeling","_elementFactory","_connect","_create","_popupMenu","_canvas","_rules","_translate","autoPlace","_autoPlace","get","on","event","context","shape","isOpen","entries","getEntries","replace","action","click","$inject","prototype","getMultiElementContextPadEntries","elements","actions","_isDeleteAllowed","group","className","title","removeElements","slice","baseAllowed","allowed","element","includes","getContextPadEntries","type","businessObject","startConnect","start","removeElement","e","getReplaceMenuPosition","Y_OFFSET","diagramContainer","getContainer","pad","getPad","html","diagramRect","getBoundingClientRect","padRect","top","left","pos","x","y","height","appendAction","options","appendStart","createShape","source","append","dragstart","splitLaneHandler","count","splitLane","open","childLanes","addLane","length","eventDefinitionType","isEventType","isForCompensation","isEmpty","position","cursor","deleteAllowed","eventBo","definition","isType","$instanceOf","isDefinition","definitions","eventDefinitions","def","$type","array","item","indexOf"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/context-pad/ContextPadProvider.js"],"sourcesContent":["import {\n  assign,\n  forEach,\n  isArray,\n  every\n} from 'min-dash';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\nimport {\n  isExpanded,\n  isEventSubProcess\n} from '../../util/DiUtil';\n\nimport {\n  isAny\n} from '../modeling/util/ModelingUtil';\n\nimport {\n  getChildLanes\n} from '../modeling/util/LaneUtil';\n\nimport {\n  hasPrimaryModifier\n} from 'diagram-js/lib/util/Mouse';\n\n\n/**\n * A provider for BPMN 2.0 elements context pad\n */\nexport default function ContextPadProvider(\n    config, injector, eventBus,\n    contextPad, modeling, elementFactory,\n    connect, create, popupMenu,\n    canvas, rules, translate) {\n\n  config = config || {};\n\n  contextPad.registerProvider(this);\n\n  this._contextPad = contextPad;\n\n  this._modeling = modeling;\n\n  this._elementFactory = elementFactory;\n  this._connect = connect;\n  this._create = create;\n  this._popupMenu = popupMenu;\n  this._canvas = canvas;\n  this._rules = rules;\n  this._translate = translate;\n\n  if (config.autoPlace !== false) {\n    this._autoPlace = injector.get('autoPlace', false);\n  }\n\n  eventBus.on('create.end', 250, function(event) {\n    var context = event.context,\n        shape = context.shape;\n\n    if (!hasPrimaryModifier(event) || !contextPad.isOpen(shape)) {\n      return;\n    }\n\n    var entries = contextPad.getEntries(shape);\n\n    if (entries.replace) {\n      entries.replace.action.click(event, shape);\n    }\n  });\n}\n\nContextPadProvider.$inject = [\n  'config.contextPad',\n  'injector',\n  'eventBus',\n  'contextPad',\n  'modeling',\n  'elementFactory',\n  'connect',\n  'create',\n  'popupMenu',\n  'canvas',\n  'rules',\n  'translate'\n];\n\nContextPadProvider.prototype.getMultiElementContextPadEntries = function(elements) {\n  var modeling = this._modeling;\n\n  var actions = {};\n\n  if (this._isDeleteAllowed(elements)) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: this._translate('Remove'),\n        action: {\n          click: function(event, elements) {\n            modeling.removeElements(elements.slice());\n          }\n        }\n      }\n    });\n  }\n\n  return actions;\n};\n\n/**\n * @param {djs.model.Base[]} elements\n * @return {boolean}\n */\nContextPadProvider.prototype._isDeleteAllowed = function(elements) {\n\n  var baseAllowed = this._rules.allowed('elements.delete', {\n    elements: elements\n  });\n\n  if (isArray(baseAllowed)) {\n    return every(baseAllowed, function(element) {\n      return includes(baseAllowed, element);\n    });\n  }\n\n  return baseAllowed;\n};\n\nContextPadProvider.prototype.getContextPadEntries = function(element) {\n  var contextPad = this._contextPad,\n      modeling = this._modeling,\n\n      elementFactory = this._elementFactory,\n      connect = this._connect,\n      create = this._create,\n      popupMenu = this._popupMenu,\n      canvas = this._canvas,\n      rules = this._rules,\n      autoPlace = this._autoPlace,\n      translate = this._translate;\n\n  var actions = {};\n\n  if (element.type === 'label') {\n    return actions;\n  }\n\n  var businessObject = element.businessObject;\n\n  function startConnect(event, element) {\n    connect.start(event, element);\n  }\n\n  function removeElement(e, element) {\n    modeling.removeElements([ element ]);\n  }\n\n  function getReplaceMenuPosition(element) {\n\n    var Y_OFFSET = 5;\n\n    var diagramContainer = canvas.getContainer(),\n        pad = contextPad.getPad(element).html;\n\n    var diagramRect = diagramContainer.getBoundingClientRect(),\n        padRect = pad.getBoundingClientRect();\n\n    var top = padRect.top - diagramRect.top;\n    var left = padRect.left - diagramRect.left;\n\n    var pos = {\n      x: left,\n      y: top + padRect.height + Y_OFFSET\n    };\n\n    return pos;\n  }\n\n\n  /**\n   * Create an append action\n   *\n   * @param {string} type\n   * @param {string} className\n   * @param {string} [title]\n   * @param {Object} [options]\n   *\n   * @return {Object} descriptor\n   */\n  function appendAction(type, className, title, options) {\n\n    if (typeof title !== 'string') {\n      options = title;\n      title = translate('Append {type}', { type: type.replace(/^bpmn:/, '') });\n    }\n\n    function appendStart(event, element) {\n\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n      create.start(event, shape, {\n        source: element\n      });\n    }\n\n\n    var append = autoPlace ? function(event, element) {\n      var shape = elementFactory.createShape(assign({ type: type }, options));\n\n      autoPlace.append(element, shape);\n    } : appendStart;\n\n\n    return {\n      group: 'model',\n      className: className,\n      title: title,\n      action: {\n        dragstart: appendStart,\n        click: append\n      }\n    };\n  }\n\n  function splitLaneHandler(count) {\n\n    return function(event, element) {\n\n      // actual split\n      modeling.splitLane(element, count);\n\n      // refresh context pad after split to\n      // get rid of split icons\n      contextPad.open(element, true);\n    };\n  }\n\n\n  if (isAny(businessObject, [ 'bpmn:Lane', 'bpmn:Participant' ]) && isExpanded(element)) {\n\n    var childLanes = getChildLanes(element);\n\n    assign(actions, {\n      'lane-insert-above': {\n        group: 'lane-insert-above',\n        className: 'bpmn-icon-lane-insert-above',\n        title: translate('Add Lane above'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'top');\n          }\n        }\n      }\n    });\n\n    if (childLanes.length < 2) {\n\n      if (element.height >= 120) {\n        assign(actions, {\n          'lane-divide-two': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-two',\n            title: translate('Divide into two Lanes'),\n            action: {\n              click: splitLaneHandler(2)\n            }\n          }\n        });\n      }\n\n      if (element.height >= 180) {\n        assign(actions, {\n          'lane-divide-three': {\n            group: 'lane-divide',\n            className: 'bpmn-icon-lane-divide-three',\n            title: translate('Divide into three Lanes'),\n            action: {\n              click: splitLaneHandler(3)\n            }\n          }\n        });\n      }\n    }\n\n    assign(actions, {\n      'lane-insert-below': {\n        group: 'lane-insert-below',\n        className: 'bpmn-icon-lane-insert-below',\n        title: translate('Add Lane below'),\n        action: {\n          click: function(event, element) {\n            modeling.addLane(element, 'bottom');\n          }\n        }\n      }\n    });\n\n  }\n\n  if (is(businessObject, 'bpmn:FlowNode')) {\n\n    if (is(businessObject, 'bpmn:EventBasedGateway')) {\n\n      assign(actions, {\n        'append.receive-task': appendAction(\n          'bpmn:ReceiveTask',\n          'bpmn-icon-receive-task',\n          translate('Append ReceiveTask')\n        ),\n        'append.message-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-message',\n          translate('Append MessageIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:MessageEventDefinition' }\n        ),\n        'append.timer-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-timer',\n          translate('Append TimerIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:TimerEventDefinition' }\n        ),\n        'append.condition-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-condition',\n          translate('Append ConditionIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:ConditionalEventDefinition' }\n        ),\n        'append.signal-intermediate-event': appendAction(\n          'bpmn:IntermediateCatchEvent',\n          'bpmn-icon-intermediate-event-catch-signal',\n          translate('Append SignalIntermediateCatchEvent'),\n          { eventDefinitionType: 'bpmn:SignalEventDefinition' }\n        )\n      });\n    } else\n\n    if (isEventType(businessObject, 'bpmn:BoundaryEvent', 'bpmn:CompensateEventDefinition')) {\n\n      assign(actions, {\n        'append.compensation-activity':\n            appendAction(\n              'bpmn:Task',\n              'bpmn-icon-task',\n              translate('Append compensation activity'),\n              {\n                isForCompensation: true\n              }\n            )\n      });\n    } else\n\n    if (!is(businessObject, 'bpmn:EndEvent') &&\n        !businessObject.isForCompensation &&\n        !isEventType(businessObject, 'bpmn:IntermediateThrowEvent', 'bpmn:LinkEventDefinition') &&\n        !isEventSubProcess(businessObject)) {\n\n      assign(actions, {\n        'append.end-event': appendAction(\n          'bpmn:EndEvent',\n          'bpmn-icon-end-event-none',\n          translate('Append EndEvent')\n        ),\n        'append.gateway': appendAction(\n          'bpmn:ExclusiveGateway',\n          'bpmn-icon-gateway-none',\n          translate('Append Gateway')\n        ),\n        'append.append-task': appendAction(\n          'bpmn:Task',\n          'bpmn-icon-task',\n          translate('Append Task')\n        ),\n        'append.intermediate-event': appendAction(\n          'bpmn:IntermediateThrowEvent',\n          'bpmn-icon-intermediate-event-none',\n          translate('Append Intermediate/Boundary Event')\n        )\n      });\n    }\n  }\n\n  if (!popupMenu.isEmpty(element, 'bpmn-replace')) {\n\n    // Replace menu entry\n    assign(actions, {\n      'replace': {\n        group: 'edit',\n        className: 'bpmn-icon-screw-wrench',\n        title: translate('Change type'),\n        action: {\n          click: function(event, element) {\n\n            var position = assign(getReplaceMenuPosition(element), {\n              cursor: { x: event.x, y: event.y }\n            });\n\n            popupMenu.open(element, 'bpmn-replace', position);\n          }\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:SequenceFlow')) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation'\n      )\n    });\n  }\n\n  if (\n    isAny(businessObject, [\n      'bpmn:FlowNode',\n      'bpmn:InteractionNode',\n      'bpmn:DataObjectReference',\n      'bpmn:DataStoreReference',\n    ])\n  ) {\n    assign(actions, {\n      'append.text-annotation': appendAction(\n        'bpmn:TextAnnotation',\n        'bpmn-icon-text-annotation'\n      ),\n\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate(\n          'Connect using ' +\n            (businessObject.isForCompensation\n              ? ''\n              : 'Sequence/MessageFlow or ') +\n            'Association'\n        ),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  if (is(businessObject, 'bpmn:TextAnnotation')) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using Association'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect,\n        },\n      },\n    });\n  }\n\n  if (isAny(businessObject, [ 'bpmn:DataObjectReference', 'bpmn:DataStoreReference' ])) {\n    assign(actions, {\n      'connect': {\n        group: 'connect',\n        className: 'bpmn-icon-connection-multi',\n        title: translate('Connect using DataInputAssociation'),\n        action: {\n          click: startConnect,\n          dragstart: startConnect\n        }\n      }\n    });\n  }\n\n  if (is(businessObject, 'bpmn:Group')) {\n    assign(actions, {\n      'append.text-annotation': appendAction('bpmn:TextAnnotation', 'bpmn-icon-text-annotation')\n    });\n  }\n\n  // delete element entry, only show if allowed by rules\n  var deleteAllowed = rules.allowed('elements.delete', { elements: [ element ] });\n\n  if (isArray(deleteAllowed)) {\n\n    // was the element returned as a deletion candidate?\n    deleteAllowed = deleteAllowed[0] === element;\n  }\n\n  if (deleteAllowed) {\n    assign(actions, {\n      'delete': {\n        group: 'edit',\n        className: 'bpmn-icon-trash',\n        title: translate('Remove'),\n        action: {\n          click: removeElement\n        }\n      }\n    });\n  }\n\n  return actions;\n};\n\n\n// helpers /////////\n\nfunction isEventType(eventBo, type, definition) {\n\n  var isType = eventBo.$instanceOf(type);\n  var isDefinition = false;\n\n  var definitions = eventBo.eventDefinitions || [];\n  forEach(definitions, function(def) {\n    if (def.$type === definition) {\n      isDefinition = true;\n    }\n  });\n\n  return isType && isDefinition;\n}\n\nfunction includes(array, item) {\n  return array.indexOf(item) !== -1;\n}"],"mappings":"AAAA,SACEA,MADF,EAEEC,OAFF,EAGEC,OAHF,EAIEC,KAJF,QAKO,UALP;AAOA,SACEC,EADF,QAEO,sBAFP;AAIA,SACEC,UADF,EAEEC,iBAFF,QAGO,mBAHP;AAKA,SACEC,KADF,QAEO,+BAFP;AAIA,SACEC,aADF,QAEO,2BAFP;AAIA,SACEC,kBADF,QAEO,2BAFP;AAKA;AACA;AACA;;AACA,eAAe,SAASC,kBAAT,CACXC,MADW,EACHC,QADG,EACOC,QADP,EAEXC,UAFW,EAECC,QAFD,EAEWC,cAFX,EAGXC,OAHW,EAGFC,MAHE,EAGMC,SAHN,EAIXC,MAJW,EAIHC,KAJG,EAIIC,SAJJ,EAIe;EAE5BX,MAAM,GAAGA,MAAM,IAAI,EAAnB;EAEAG,UAAU,CAACS,gBAAX,CAA4B,IAA5B;EAEA,KAAKC,WAAL,GAAmBV,UAAnB;EAEA,KAAKW,SAAL,GAAiBV,QAAjB;EAEA,KAAKW,eAAL,GAAuBV,cAAvB;EACA,KAAKW,QAAL,GAAgBV,OAAhB;EACA,KAAKW,OAAL,GAAeV,MAAf;EACA,KAAKW,UAAL,GAAkBV,SAAlB;EACA,KAAKW,OAAL,GAAeV,MAAf;EACA,KAAKW,MAAL,GAAcV,KAAd;EACA,KAAKW,UAAL,GAAkBV,SAAlB;;EAEA,IAAIX,MAAM,CAACsB,SAAP,KAAqB,KAAzB,EAAgC;IAC9B,KAAKC,UAAL,GAAkBtB,QAAQ,CAACuB,GAAT,CAAa,WAAb,EAA0B,KAA1B,CAAlB;EACD;;EAEDtB,QAAQ,CAACuB,EAAT,CAAY,YAAZ,EAA0B,GAA1B,EAA+B,UAASC,KAAT,EAAgB;IAC7C,IAAIC,OAAO,GAAGD,KAAK,CAACC,OAApB;IAAA,IACIC,KAAK,GAAGD,OAAO,CAACC,KADpB;;IAGA,IAAI,CAAC9B,kBAAkB,CAAC4B,KAAD,CAAnB,IAA8B,CAACvB,UAAU,CAAC0B,MAAX,CAAkBD,KAAlB,CAAnC,EAA6D;MAC3D;IACD;;IAED,IAAIE,OAAO,GAAG3B,UAAU,CAAC4B,UAAX,CAAsBH,KAAtB,CAAd;;IAEA,IAAIE,OAAO,CAACE,OAAZ,EAAqB;MACnBF,OAAO,CAACE,OAAR,CAAgBC,MAAhB,CAAuBC,KAAvB,CAA6BR,KAA7B,EAAoCE,KAApC;IACD;EACF,CAbD;AAcD;AAED7B,kBAAkB,CAACoC,OAAnB,GAA6B,CAC3B,mBAD2B,EAE3B,UAF2B,EAG3B,UAH2B,EAI3B,YAJ2B,EAK3B,UAL2B,EAM3B,gBAN2B,EAO3B,SAP2B,EAQ3B,QAR2B,EAS3B,WAT2B,EAU3B,QAV2B,EAW3B,OAX2B,EAY3B,WAZ2B,CAA7B;;AAeApC,kBAAkB,CAACqC,SAAnB,CAA6BC,gCAA7B,GAAgE,UAASC,QAAT,EAAmB;EACjF,IAAIlC,QAAQ,GAAG,KAAKU,SAApB;EAEA,IAAIyB,OAAO,GAAG,EAAd;;EAEA,IAAI,KAAKC,gBAAL,CAAsBF,QAAtB,CAAJ,EAAqC;IACnCjD,MAAM,CAACkD,OAAD,EAAU;MACd,UAAU;QACRE,KAAK,EAAE,MADC;QAERC,SAAS,EAAE,iBAFH;QAGRC,KAAK,EAAE,KAAKtB,UAAL,CAAgB,QAAhB,CAHC;QAIRY,MAAM,EAAE;UACNC,KAAK,EAAE,UAASR,KAAT,EAAgBY,QAAhB,EAA0B;YAC/BlC,QAAQ,CAACwC,cAAT,CAAwBN,QAAQ,CAACO,KAAT,EAAxB;UACD;QAHK;MAJA;IADI,CAAV,CAAN;EAYD;;EAED,OAAON,OAAP;AACD,CArBD;AAuBA;AACA;AACA;AACA;;;AACAxC,kBAAkB,CAACqC,SAAnB,CAA6BI,gBAA7B,GAAgD,UAASF,QAAT,EAAmB;EAEjE,IAAIQ,WAAW,GAAG,KAAK1B,MAAL,CAAY2B,OAAZ,CAAoB,iBAApB,EAAuC;IACvDT,QAAQ,EAAEA;EAD6C,CAAvC,CAAlB;;EAIA,IAAI/C,OAAO,CAACuD,WAAD,CAAX,EAA0B;IACxB,OAAOtD,KAAK,CAACsD,WAAD,EAAc,UAASE,OAAT,EAAkB;MAC1C,OAAOC,QAAQ,CAACH,WAAD,EAAcE,OAAd,CAAf;IACD,CAFW,CAAZ;EAGD;;EAED,OAAOF,WAAP;AACD,CAbD;;AAeA/C,kBAAkB,CAACqC,SAAnB,CAA6Bc,oBAA7B,GAAoD,UAASF,OAAT,EAAkB;EACpE,IAAI7C,UAAU,GAAG,KAAKU,WAAtB;EAAA,IACIT,QAAQ,GAAG,KAAKU,SADpB;EAAA,IAGIT,cAAc,GAAG,KAAKU,eAH1B;EAAA,IAIIT,OAAO,GAAG,KAAKU,QAJnB;EAAA,IAKIT,MAAM,GAAG,KAAKU,OALlB;EAAA,IAMIT,SAAS,GAAG,KAAKU,UANrB;EAAA,IAOIT,MAAM,GAAG,KAAKU,OAPlB;EAAA,IAQIT,KAAK,GAAG,KAAKU,MARjB;EAAA,IASIE,SAAS,GAAG,KAAKC,UATrB;EAAA,IAUIZ,SAAS,GAAG,KAAKU,UAVrB;EAYA,IAAIkB,OAAO,GAAG,EAAd;;EAEA,IAAIS,OAAO,CAACG,IAAR,KAAiB,OAArB,EAA8B;IAC5B,OAAOZ,OAAP;EACD;;EAED,IAAIa,cAAc,GAAGJ,OAAO,CAACI,cAA7B;;EAEA,SAASC,YAAT,CAAsB3B,KAAtB,EAA6BsB,OAA7B,EAAsC;IACpC1C,OAAO,CAACgD,KAAR,CAAc5B,KAAd,EAAqBsB,OAArB;EACD;;EAED,SAASO,aAAT,CAAuBC,CAAvB,EAA0BR,OAA1B,EAAmC;IACjC5C,QAAQ,CAACwC,cAAT,CAAwB,CAAEI,OAAF,CAAxB;EACD;;EAED,SAASS,sBAAT,CAAgCT,OAAhC,EAAyC;IAEvC,IAAIU,QAAQ,GAAG,CAAf;IAEA,IAAIC,gBAAgB,GAAGlD,MAAM,CAACmD,YAAP,EAAvB;IAAA,IACIC,GAAG,GAAG1D,UAAU,CAAC2D,MAAX,CAAkBd,OAAlB,EAA2Be,IADrC;IAGA,IAAIC,WAAW,GAAGL,gBAAgB,CAACM,qBAAjB,EAAlB;IAAA,IACIC,OAAO,GAAGL,GAAG,CAACI,qBAAJ,EADd;IAGA,IAAIE,GAAG,GAAGD,OAAO,CAACC,GAAR,GAAcH,WAAW,CAACG,GAApC;IACA,IAAIC,IAAI,GAAGF,OAAO,CAACE,IAAR,GAAeJ,WAAW,CAACI,IAAtC;IAEA,IAAIC,GAAG,GAAG;MACRC,CAAC,EAAEF,IADK;MAERG,CAAC,EAAEJ,GAAG,GAAGD,OAAO,CAACM,MAAd,GAAuBd;IAFlB,CAAV;IAKA,OAAOW,GAAP;EACD;EAGD;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;EACE,SAASI,YAAT,CAAsBtB,IAAtB,EAA4BT,SAA5B,EAAuCC,KAAvC,EAA8C+B,OAA9C,EAAuD;IAErD,IAAI,OAAO/B,KAAP,KAAiB,QAArB,EAA+B;MAC7B+B,OAAO,GAAG/B,KAAV;MACAA,KAAK,GAAGhC,SAAS,CAAC,eAAD,EAAkB;QAAEwC,IAAI,EAAEA,IAAI,CAACnB,OAAL,CAAa,QAAb,EAAuB,EAAvB;MAAR,CAAlB,CAAjB;IACD;;IAED,SAAS2C,WAAT,CAAqBjD,KAArB,EAA4BsB,OAA5B,EAAqC;MAEnC,IAAIpB,KAAK,GAAGvB,cAAc,CAACuE,WAAf,CAA2BvF,MAAM,CAAC;QAAE8D,IAAI,EAAEA;MAAR,CAAD,EAAiBuB,OAAjB,CAAjC,CAAZ;MACAnE,MAAM,CAAC+C,KAAP,CAAa5B,KAAb,EAAoBE,KAApB,EAA2B;QACzBiD,MAAM,EAAE7B;MADiB,CAA3B;IAGD;;IAGD,IAAI8B,MAAM,GAAGxD,SAAS,GAAG,UAASI,KAAT,EAAgBsB,OAAhB,EAAyB;MAChD,IAAIpB,KAAK,GAAGvB,cAAc,CAACuE,WAAf,CAA2BvF,MAAM,CAAC;QAAE8D,IAAI,EAAEA;MAAR,CAAD,EAAiBuB,OAAjB,CAAjC,CAAZ;MAEApD,SAAS,CAACwD,MAAV,CAAiB9B,OAAjB,EAA0BpB,KAA1B;IACD,CAJqB,GAIlB+C,WAJJ;IAOA,OAAO;MACLlC,KAAK,EAAE,OADF;MAELC,SAAS,EAAEA,SAFN;MAGLC,KAAK,EAAEA,KAHF;MAILV,MAAM,EAAE;QACN8C,SAAS,EAAEJ,WADL;QAENzC,KAAK,EAAE4C;MAFD;IAJH,CAAP;EASD;;EAED,SAASE,gBAAT,CAA0BC,KAA1B,EAAiC;IAE/B,OAAO,UAASvD,KAAT,EAAgBsB,OAAhB,EAAyB;MAE9B;MACA5C,QAAQ,CAAC8E,SAAT,CAAmBlC,OAAnB,EAA4BiC,KAA5B,EAH8B,CAK9B;MACA;;MACA9E,UAAU,CAACgF,IAAX,CAAgBnC,OAAhB,EAAyB,IAAzB;IACD,CARD;EASD;;EAGD,IAAIpD,KAAK,CAACwD,cAAD,EAAiB,CAAE,WAAF,EAAe,kBAAf,CAAjB,CAAL,IAA8D1D,UAAU,CAACsD,OAAD,CAA5E,EAAuF;IAErF,IAAIoC,UAAU,GAAGvF,aAAa,CAACmD,OAAD,CAA9B;IAEA3D,MAAM,CAACkD,OAAD,EAAU;MACd,qBAAqB;QACnBE,KAAK,EAAE,mBADY;QAEnBC,SAAS,EAAE,6BAFQ;QAGnBC,KAAK,EAAEhC,SAAS,CAAC,gBAAD,CAHG;QAInBsB,MAAM,EAAE;UACNC,KAAK,EAAE,UAASR,KAAT,EAAgBsB,OAAhB,EAAyB;YAC9B5C,QAAQ,CAACiF,OAAT,CAAiBrC,OAAjB,EAA0B,KAA1B;UACD;QAHK;MAJW;IADP,CAAV,CAAN;;IAaA,IAAIoC,UAAU,CAACE,MAAX,GAAoB,CAAxB,EAA2B;MAEzB,IAAItC,OAAO,CAACwB,MAAR,IAAkB,GAAtB,EAA2B;QACzBnF,MAAM,CAACkD,OAAD,EAAU;UACd,mBAAmB;YACjBE,KAAK,EAAE,aADU;YAEjBC,SAAS,EAAE,2BAFM;YAGjBC,KAAK,EAAEhC,SAAS,CAAC,uBAAD,CAHC;YAIjBsB,MAAM,EAAE;cACNC,KAAK,EAAE8C,gBAAgB,CAAC,CAAD;YADjB;UAJS;QADL,CAAV,CAAN;MAUD;;MAED,IAAIhC,OAAO,CAACwB,MAAR,IAAkB,GAAtB,EAA2B;QACzBnF,MAAM,CAACkD,OAAD,EAAU;UACd,qBAAqB;YACnBE,KAAK,EAAE,aADY;YAEnBC,SAAS,EAAE,6BAFQ;YAGnBC,KAAK,EAAEhC,SAAS,CAAC,yBAAD,CAHG;YAInBsB,MAAM,EAAE;cACNC,KAAK,EAAE8C,gBAAgB,CAAC,CAAD;YADjB;UAJW;QADP,CAAV,CAAN;MAUD;IACF;;IAED3F,MAAM,CAACkD,OAAD,EAAU;MACd,qBAAqB;QACnBE,KAAK,EAAE,mBADY;QAEnBC,SAAS,EAAE,6BAFQ;QAGnBC,KAAK,EAAEhC,SAAS,CAAC,gBAAD,CAHG;QAInBsB,MAAM,EAAE;UACNC,KAAK,EAAE,UAASR,KAAT,EAAgBsB,OAAhB,EAAyB;YAC9B5C,QAAQ,CAACiF,OAAT,CAAiBrC,OAAjB,EAA0B,QAA1B;UACD;QAHK;MAJW;IADP,CAAV,CAAN;EAaD;;EAED,IAAIvD,EAAE,CAAC2D,cAAD,EAAiB,eAAjB,CAAN,EAAyC;IAEvC,IAAI3D,EAAE,CAAC2D,cAAD,EAAiB,wBAAjB,CAAN,EAAkD;MAEhD/D,MAAM,CAACkD,OAAD,EAAU;QACd,uBAAuBkC,YAAY,CACjC,kBADiC,EAEjC,wBAFiC,EAGjC9D,SAAS,CAAC,oBAAD,CAHwB,CADrB;QAMd,qCAAqC8D,YAAY,CAC/C,6BAD+C,EAE/C,4CAF+C,EAG/C9D,SAAS,CAAC,sCAAD,CAHsC,EAI/C;UAAE4E,mBAAmB,EAAE;QAAvB,CAJ+C,CANnC;QAYd,mCAAmCd,YAAY,CAC7C,6BAD6C,EAE7C,0CAF6C,EAG7C9D,SAAS,CAAC,oCAAD,CAHoC,EAI7C;UAAE4E,mBAAmB,EAAE;QAAvB,CAJ6C,CAZjC;QAkBd,uCAAuCd,YAAY,CACjD,6BADiD,EAEjD,8CAFiD,EAGjD9D,SAAS,CAAC,wCAAD,CAHwC,EAIjD;UAAE4E,mBAAmB,EAAE;QAAvB,CAJiD,CAlBrC;QAwBd,oCAAoCd,YAAY,CAC9C,6BAD8C,EAE9C,2CAF8C,EAG9C9D,SAAS,CAAC,qCAAD,CAHqC,EAI9C;UAAE4E,mBAAmB,EAAE;QAAvB,CAJ8C;MAxBlC,CAAV,CAAN;IA+BD,CAjCD,MAmCA,IAAIC,WAAW,CAACpC,cAAD,EAAiB,oBAAjB,EAAuC,gCAAvC,CAAf,EAAyF;MAEvF/D,MAAM,CAACkD,OAAD,EAAU;QACd,gCACIkC,YAAY,CACV,WADU,EAEV,gBAFU,EAGV9D,SAAS,CAAC,8BAAD,CAHC,EAIV;UACE8E,iBAAiB,EAAE;QADrB,CAJU;MAFF,CAAV,CAAN;IAWD,CAbD,MAeA,IAAI,CAAChG,EAAE,CAAC2D,cAAD,EAAiB,eAAjB,CAAH,IACA,CAACA,cAAc,CAACqC,iBADhB,IAEA,CAACD,WAAW,CAACpC,cAAD,EAAiB,6BAAjB,EAAgD,0BAAhD,CAFZ,IAGA,CAACzD,iBAAiB,CAACyD,cAAD,CAHtB,EAGwC;MAEtC/D,MAAM,CAACkD,OAAD,EAAU;QACd,oBAAoBkC,YAAY,CAC9B,eAD8B,EAE9B,0BAF8B,EAG9B9D,SAAS,CAAC,iBAAD,CAHqB,CADlB;QAMd,kBAAkB8D,YAAY,CAC5B,uBAD4B,EAE5B,wBAF4B,EAG5B9D,SAAS,CAAC,gBAAD,CAHmB,CANhB;QAWd,sBAAsB8D,YAAY,CAChC,WADgC,EAEhC,gBAFgC,EAGhC9D,SAAS,CAAC,aAAD,CAHuB,CAXpB;QAgBd,6BAA6B8D,YAAY,CACvC,6BADuC,EAEvC,mCAFuC,EAGvC9D,SAAS,CAAC,oCAAD,CAH8B;MAhB3B,CAAV,CAAN;IAsBD;EACF;;EAED,IAAI,CAACH,SAAS,CAACkF,OAAV,CAAkB1C,OAAlB,EAA2B,cAA3B,CAAL,EAAiD;IAE/C;IACA3D,MAAM,CAACkD,OAAD,EAAU;MACd,WAAW;QACTE,KAAK,EAAE,MADE;QAETC,SAAS,EAAE,wBAFF;QAGTC,KAAK,EAAEhC,SAAS,CAAC,aAAD,CAHP;QAITsB,MAAM,EAAE;UACNC,KAAK,EAAE,UAASR,KAAT,EAAgBsB,OAAhB,EAAyB;YAE9B,IAAI2C,QAAQ,GAAGtG,MAAM,CAACoE,sBAAsB,CAACT,OAAD,CAAvB,EAAkC;cACrD4C,MAAM,EAAE;gBAAEtB,CAAC,EAAE5C,KAAK,CAAC4C,CAAX;gBAAcC,CAAC,EAAE7C,KAAK,CAAC6C;cAAvB;YAD6C,CAAlC,CAArB;YAIA/D,SAAS,CAAC2E,IAAV,CAAenC,OAAf,EAAwB,cAAxB,EAAwC2C,QAAxC;UACD;QARK;MAJC;IADG,CAAV,CAAN;EAiBD;;EAED,IAAIlG,EAAE,CAAC2D,cAAD,EAAiB,mBAAjB,CAAN,EAA6C;IAC3C/D,MAAM,CAACkD,OAAD,EAAU;MACd,0BAA0BkC,YAAY,CACpC,qBADoC,EAEpC,2BAFoC;IADxB,CAAV,CAAN;EAMD;;EAED,IACE7E,KAAK,CAACwD,cAAD,EAAiB,CACpB,eADoB,EAEpB,sBAFoB,EAGpB,0BAHoB,EAIpB,yBAJoB,CAAjB,CADP,EAOE;IACA/D,MAAM,CAACkD,OAAD,EAAU;MACd,0BAA0BkC,YAAY,CACpC,qBADoC,EAEpC,2BAFoC,CADxB;MAMd,WAAW;QACThC,KAAK,EAAE,SADE;QAETC,SAAS,EAAE,4BAFF;QAGTC,KAAK,EAAEhC,SAAS,CACd,oBACGyC,cAAc,CAACqC,iBAAf,GACG,EADH,GAEG,0BAHN,IAIE,aALY,CAHP;QAUTxD,MAAM,EAAE;UACNC,KAAK,EAAEmB,YADD;UAEN0B,SAAS,EAAE1B;QAFL;MAVC;IANG,CAAV,CAAN;EAsBD;;EAED,IAAI5D,EAAE,CAAC2D,cAAD,EAAiB,qBAAjB,CAAN,EAA+C;IAC7C/D,MAAM,CAACkD,OAAD,EAAU;MACd,WAAW;QACTE,KAAK,EAAE,SADE;QAETC,SAAS,EAAE,4BAFF;QAGTC,KAAK,EAAEhC,SAAS,CAAC,2BAAD,CAHP;QAITsB,MAAM,EAAE;UACNC,KAAK,EAAEmB,YADD;UAEN0B,SAAS,EAAE1B;QAFL;MAJC;IADG,CAAV,CAAN;EAWD;;EAED,IAAIzD,KAAK,CAACwD,cAAD,EAAiB,CAAE,0BAAF,EAA8B,yBAA9B,CAAjB,CAAT,EAAsF;IACpF/D,MAAM,CAACkD,OAAD,EAAU;MACd,WAAW;QACTE,KAAK,EAAE,SADE;QAETC,SAAS,EAAE,4BAFF;QAGTC,KAAK,EAAEhC,SAAS,CAAC,oCAAD,CAHP;QAITsB,MAAM,EAAE;UACNC,KAAK,EAAEmB,YADD;UAEN0B,SAAS,EAAE1B;QAFL;MAJC;IADG,CAAV,CAAN;EAWD;;EAED,IAAI5D,EAAE,CAAC2D,cAAD,EAAiB,YAAjB,CAAN,EAAsC;IACpC/D,MAAM,CAACkD,OAAD,EAAU;MACd,0BAA0BkC,YAAY,CAAC,qBAAD,EAAwB,2BAAxB;IADxB,CAAV,CAAN;EAGD,CA3VmE,CA6VpE;;;EACA,IAAIoB,aAAa,GAAGnF,KAAK,CAACqC,OAAN,CAAc,iBAAd,EAAiC;IAAET,QAAQ,EAAE,CAAEU,OAAF;EAAZ,CAAjC,CAApB;;EAEA,IAAIzD,OAAO,CAACsG,aAAD,CAAX,EAA4B;IAE1B;IACAA,aAAa,GAAGA,aAAa,CAAC,CAAD,CAAb,KAAqB7C,OAArC;EACD;;EAED,IAAI6C,aAAJ,EAAmB;IACjBxG,MAAM,CAACkD,OAAD,EAAU;MACd,UAAU;QACRE,KAAK,EAAE,MADC;QAERC,SAAS,EAAE,iBAFH;QAGRC,KAAK,EAAEhC,SAAS,CAAC,QAAD,CAHR;QAIRsB,MAAM,EAAE;UACNC,KAAK,EAAEqB;QADD;MAJA;IADI,CAAV,CAAN;EAUD;;EAED,OAAOhB,OAAP;AACD,CApXD,C,CAuXA;;;AAEA,SAASiD,WAAT,CAAqBM,OAArB,EAA8B3C,IAA9B,EAAoC4C,UAApC,EAAgD;EAE9C,IAAIC,MAAM,GAAGF,OAAO,CAACG,WAAR,CAAoB9C,IAApB,CAAb;EACA,IAAI+C,YAAY,GAAG,KAAnB;EAEA,IAAIC,WAAW,GAAGL,OAAO,CAACM,gBAAR,IAA4B,EAA9C;EACA9G,OAAO,CAAC6G,WAAD,EAAc,UAASE,GAAT,EAAc;IACjC,IAAIA,GAAG,CAACC,KAAJ,KAAcP,UAAlB,EAA8B;MAC5BG,YAAY,GAAG,IAAf;IACD;EACF,CAJM,CAAP;EAMA,OAAOF,MAAM,IAAIE,YAAjB;AACD;;AAED,SAASjD,QAAT,CAAkBsD,KAAlB,EAAyBC,IAAzB,EAA+B;EAC7B,OAAOD,KAAK,CAACE,OAAN,CAAcD,IAAd,MAAwB,CAAC,CAAhC;AACD"},"metadata":{},"sourceType":"module"}