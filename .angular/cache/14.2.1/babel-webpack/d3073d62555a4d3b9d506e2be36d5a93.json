{"ast":null,"code":"var MARKER_RESIZING = 'djs-resizing',\n    MARKER_RESIZE_NOT_OK = 'resize-not-ok';\nvar LOW_PRIORITY = 500;\nimport { attr as svgAttr, remove as svgRemove, classes as svgClasses } from 'tiny-svg';\n/**\n * Provides previews for resizing shapes when resizing.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {PreviewSupport} previewSupport\n */\n\nexport default function ResizePreview(eventBus, canvas, previewSupport) {\n  /**\n   * Update resizer frame.\n   *\n   * @param {Object} context\n   */\n  function updateFrame(context) {\n    var shape = context.shape,\n        bounds = context.newBounds,\n        frame = context.frame;\n\n    if (!frame) {\n      frame = context.frame = previewSupport.addFrame(shape, canvas.getActiveLayer());\n      canvas.addMarker(shape, MARKER_RESIZING);\n    }\n\n    if (bounds.width > 5) {\n      svgAttr(frame, {\n        x: bounds.x,\n        width: bounds.width\n      });\n    }\n\n    if (bounds.height > 5) {\n      svgAttr(frame, {\n        y: bounds.y,\n        height: bounds.height\n      });\n    }\n\n    if (context.canExecute) {\n      svgClasses(frame).remove(MARKER_RESIZE_NOT_OK);\n    } else {\n      svgClasses(frame).add(MARKER_RESIZE_NOT_OK);\n    }\n  }\n  /**\n   * Remove resizer frame.\n   *\n   * @param {Object} context\n   */\n\n\n  function removeFrame(context) {\n    var shape = context.shape,\n        frame = context.frame;\n\n    if (frame) {\n      svgRemove(context.frame);\n    }\n\n    canvas.removeMarker(shape, MARKER_RESIZING);\n  } // add and update previews\n\n\n  eventBus.on('resize.move', LOW_PRIORITY, function (event) {\n    updateFrame(event.context);\n  }); // remove previews\n\n  eventBus.on('resize.cleanup', function (event) {\n    removeFrame(event.context);\n  });\n}\nResizePreview.$inject = ['eventBus', 'canvas', 'previewSupport'];","map":{"version":3,"names":["MARKER_RESIZING","MARKER_RESIZE_NOT_OK","LOW_PRIORITY","attr","svgAttr","remove","svgRemove","classes","svgClasses","ResizePreview","eventBus","canvas","previewSupport","updateFrame","context","shape","bounds","newBounds","frame","addFrame","getActiveLayer","addMarker","width","x","height","y","canExecute","add","removeFrame","removeMarker","on","event","$inject"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/diagram-js/lib/features/resize/ResizePreview.js"],"sourcesContent":["var MARKER_RESIZING = 'djs-resizing',\n    MARKER_RESIZE_NOT_OK = 'resize-not-ok';\n\nvar LOW_PRIORITY = 500;\n\nimport {\n  attr as svgAttr,\n  remove as svgRemove,\n  classes as svgClasses\n} from 'tiny-svg';\n\n\n/**\n * Provides previews for resizing shapes when resizing.\n *\n * @param {EventBus} eventBus\n * @param {Canvas} canvas\n * @param {PreviewSupport} previewSupport\n */\nexport default function ResizePreview(eventBus, canvas, previewSupport) {\n\n  /**\n   * Update resizer frame.\n   *\n   * @param {Object} context\n   */\n  function updateFrame(context) {\n\n    var shape = context.shape,\n        bounds = context.newBounds,\n        frame = context.frame;\n\n    if (!frame) {\n      frame = context.frame = previewSupport.addFrame(shape, canvas.getActiveLayer());\n\n      canvas.addMarker(shape, MARKER_RESIZING);\n    }\n\n    if (bounds.width > 5) {\n      svgAttr(frame, { x: bounds.x, width: bounds.width });\n    }\n\n    if (bounds.height > 5) {\n      svgAttr(frame, { y: bounds.y, height: bounds.height });\n    }\n\n    if (context.canExecute) {\n      svgClasses(frame).remove(MARKER_RESIZE_NOT_OK);\n    } else {\n      svgClasses(frame).add(MARKER_RESIZE_NOT_OK);\n    }\n  }\n\n  /**\n   * Remove resizer frame.\n   *\n   * @param {Object} context\n   */\n  function removeFrame(context) {\n    var shape = context.shape,\n        frame = context.frame;\n\n    if (frame) {\n      svgRemove(context.frame);\n    }\n\n    canvas.removeMarker(shape, MARKER_RESIZING);\n  }\n\n  // add and update previews\n  eventBus.on('resize.move', LOW_PRIORITY, function(event) {\n    updateFrame(event.context);\n  });\n\n  // remove previews\n  eventBus.on('resize.cleanup', function(event) {\n    removeFrame(event.context);\n  });\n\n}\n\nResizePreview.$inject = [\n  'eventBus',\n  'canvas',\n  'previewSupport'\n];"],"mappings":"AAAA,IAAIA,eAAe,GAAG,cAAtB;AAAA,IACIC,oBAAoB,GAAG,eAD3B;AAGA,IAAIC,YAAY,GAAG,GAAnB;AAEA,SACEC,IAAI,IAAIC,OADV,EAEEC,MAAM,IAAIC,SAFZ,EAGEC,OAAO,IAAIC,UAHb,QAIO,UAJP;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,aAAT,CAAuBC,QAAvB,EAAiCC,MAAjC,EAAyCC,cAAzC,EAAyD;EAEtE;AACF;AACA;AACA;AACA;EACE,SAASC,WAAT,CAAqBC,OAArB,EAA8B;IAE5B,IAAIC,KAAK,GAAGD,OAAO,CAACC,KAApB;IAAA,IACIC,MAAM,GAAGF,OAAO,CAACG,SADrB;IAAA,IAEIC,KAAK,GAAGJ,OAAO,CAACI,KAFpB;;IAIA,IAAI,CAACA,KAAL,EAAY;MACVA,KAAK,GAAGJ,OAAO,CAACI,KAAR,GAAgBN,cAAc,CAACO,QAAf,CAAwBJ,KAAxB,EAA+BJ,MAAM,CAACS,cAAP,EAA/B,CAAxB;MAEAT,MAAM,CAACU,SAAP,CAAiBN,KAAjB,EAAwBf,eAAxB;IACD;;IAED,IAAIgB,MAAM,CAACM,KAAP,GAAe,CAAnB,EAAsB;MACpBlB,OAAO,CAACc,KAAD,EAAQ;QAAEK,CAAC,EAAEP,MAAM,CAACO,CAAZ;QAAeD,KAAK,EAAEN,MAAM,CAACM;MAA7B,CAAR,CAAP;IACD;;IAED,IAAIN,MAAM,CAACQ,MAAP,GAAgB,CAApB,EAAuB;MACrBpB,OAAO,CAACc,KAAD,EAAQ;QAAEO,CAAC,EAAET,MAAM,CAACS,CAAZ;QAAeD,MAAM,EAAER,MAAM,CAACQ;MAA9B,CAAR,CAAP;IACD;;IAED,IAAIV,OAAO,CAACY,UAAZ,EAAwB;MACtBlB,UAAU,CAACU,KAAD,CAAV,CAAkBb,MAAlB,CAAyBJ,oBAAzB;IACD,CAFD,MAEO;MACLO,UAAU,CAACU,KAAD,CAAV,CAAkBS,GAAlB,CAAsB1B,oBAAtB;IACD;EACF;EAED;AACF;AACA;AACA;AACA;;;EACE,SAAS2B,WAAT,CAAqBd,OAArB,EAA8B;IAC5B,IAAIC,KAAK,GAAGD,OAAO,CAACC,KAApB;IAAA,IACIG,KAAK,GAAGJ,OAAO,CAACI,KADpB;;IAGA,IAAIA,KAAJ,EAAW;MACTZ,SAAS,CAACQ,OAAO,CAACI,KAAT,CAAT;IACD;;IAEDP,MAAM,CAACkB,YAAP,CAAoBd,KAApB,EAA2Bf,eAA3B;EACD,CAhDqE,CAkDtE;;;EACAU,QAAQ,CAACoB,EAAT,CAAY,aAAZ,EAA2B5B,YAA3B,EAAyC,UAAS6B,KAAT,EAAgB;IACvDlB,WAAW,CAACkB,KAAK,CAACjB,OAAP,CAAX;EACD,CAFD,EAnDsE,CAuDtE;;EACAJ,QAAQ,CAACoB,EAAT,CAAY,gBAAZ,EAA8B,UAASC,KAAT,EAAgB;IAC5CH,WAAW,CAACG,KAAK,CAACjB,OAAP,CAAX;EACD,CAFD;AAID;AAEDL,aAAa,CAACuB,OAAd,GAAwB,CACtB,UADsB,EAEtB,QAFsB,EAGtB,gBAHsB,CAAxB"},"metadata":{},"sourceType":"module"}