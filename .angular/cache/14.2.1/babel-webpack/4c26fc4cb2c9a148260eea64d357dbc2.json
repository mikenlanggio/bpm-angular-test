{"ast":null,"code":"import { assignStyle, clear as domClear, delegate as domDelegate, query as domQuery, classes as domClasses, attr as domAttr, domify } from 'min-dom';\nimport { getBBox as getBoundingBox } from '../../util/Elements';\nimport { escapeHTML } from '../../util/EscapeUtil';\n/**\n * Provides searching infrastructure\n */\n\nexport default function SearchPad(canvas, eventBus, overlays, selection) {\n  this._open = false;\n  this._results = [];\n  this._eventMaps = [];\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._overlays = overlays;\n  this._selection = selection; // setup elements\n\n  this._container = domify(SearchPad.BOX_HTML);\n  this._searchInput = domQuery(SearchPad.INPUT_SELECTOR, this._container);\n  this._resultsContainer = domQuery(SearchPad.RESULTS_CONTAINER_SELECTOR, this._container); // attach search pad\n\n  this._canvas.getContainer().appendChild(this._container); // cleanup on destroy\n\n\n  eventBus.on(['canvas.destroy', 'diagram.destroy'], this.close, this);\n}\nSearchPad.$inject = ['canvas', 'eventBus', 'overlays', 'selection'];\n/**\n * Binds and keeps track of all event listereners\n */\n\nSearchPad.prototype._bindEvents = function () {\n  var self = this;\n\n  function listen(el, selector, type, fn) {\n    self._eventMaps.push({\n      el: el,\n      type: type,\n      listener: domDelegate.bind(el, selector, type, fn)\n    });\n  } // close search on clicking anywhere outside\n\n\n  listen(document, 'html', 'click', function (e) {\n    self.close();\n  }); // stop event from propagating and closing search\n  // focus on input\n\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'click', function (e) {\n    e.stopPropagation();\n    e.delegateTarget.focus();\n  }); // preselect result on hover\n\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'mouseover', function (e) {\n    e.stopPropagation();\n\n    self._scrollToNode(e.delegateTarget);\n\n    self._preselect(e.delegateTarget);\n  }); // selects desired result on mouse click\n\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'click', function (e) {\n    e.stopPropagation();\n\n    self._select(e.delegateTarget);\n  }); // prevent cursor in input from going left and right when using up/down to\n  // navigate results\n\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keydown', function (e) {\n    // up\n    if (e.keyCode === 38) {\n      e.preventDefault();\n    } // down\n\n\n    if (e.keyCode === 40) {\n      e.preventDefault();\n    }\n  }); // handle keyboard input\n\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keyup', function (e) {\n    // escape\n    if (e.keyCode === 27) {\n      return self.close();\n    } // enter\n\n\n    if (e.keyCode === 13) {\n      var selected = self._getCurrentResult();\n\n      return selected ? self._select(selected) : self.close();\n    } // up\n\n\n    if (e.keyCode === 38) {\n      return self._scrollToDirection(true);\n    } // down\n\n\n    if (e.keyCode === 40) {\n      return self._scrollToDirection();\n    } // left && right\n    // do not search while navigating text input\n\n\n    if (e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    } // anything else\n\n\n    self._search(e.delegateTarget.value);\n  });\n};\n/**\n * Unbinds all previously established listeners\n */\n\n\nSearchPad.prototype._unbindEvents = function () {\n  this._eventMaps.forEach(function (m) {\n    domDelegate.unbind(m.el, m.type, m.listener);\n  });\n};\n/**\n * Performs a search for the given pattern.\n *\n * @param  {string} pattern\n */\n\n\nSearchPad.prototype._search = function (pattern) {\n  var self = this;\n\n  this._clearResults(); // do not search on empty query\n\n\n  if (!pattern || pattern === '') {\n    return;\n  }\n\n  var searchResults = this._searchProvider.find(pattern);\n\n  if (!searchResults.length) {\n    return;\n  } // append new results\n\n\n  searchResults.forEach(function (result) {\n    var id = result.element.id;\n\n    var node = self._createResultNode(result, id);\n\n    self._results[id] = {\n      element: result.element,\n      node: node\n    };\n  }); // preselect first result\n\n  var node = domQuery(SearchPad.RESULT_SELECTOR, this._resultsContainer);\n\n  this._scrollToNode(node);\n\n  this._preselect(node);\n};\n/**\n * Navigate to the previous/next result. Defaults to next result.\n * @param  {boolean} previous\n */\n\n\nSearchPad.prototype._scrollToDirection = function (previous) {\n  var selected = this._getCurrentResult();\n\n  if (!selected) {\n    return;\n  }\n\n  var node = previous ? selected.previousElementSibling : selected.nextElementSibling;\n\n  if (node) {\n    this._scrollToNode(node);\n\n    this._preselect(node);\n  }\n};\n/**\n * Scroll to the node if it is not visible.\n *\n * @param  {Element} node\n */\n\n\nSearchPad.prototype._scrollToNode = function (node) {\n  if (!node || node === this._getCurrentResult()) {\n    return;\n  }\n\n  var nodeOffset = node.offsetTop;\n  var containerScroll = this._resultsContainer.scrollTop;\n  var bottomScroll = nodeOffset - this._resultsContainer.clientHeight + node.clientHeight;\n\n  if (nodeOffset < containerScroll) {\n    this._resultsContainer.scrollTop = nodeOffset;\n  } else if (containerScroll < bottomScroll) {\n    this._resultsContainer.scrollTop = bottomScroll;\n  }\n};\n/**\n * Clears all results data.\n */\n\n\nSearchPad.prototype._clearResults = function () {\n  domClear(this._resultsContainer);\n  this._results = [];\n\n  this._resetOverlay();\n\n  this._eventBus.fire('searchPad.cleared');\n};\n/**\n * Get currently selected result.\n *\n * @return {Element}\n */\n\n\nSearchPad.prototype._getCurrentResult = function () {\n  return domQuery(SearchPad.RESULT_SELECTED_SELECTOR, this._resultsContainer);\n};\n/**\n * Create result DOM element within results container\n * that corresponds to a search result.\n *\n * 'result' : one of the elements returned by SearchProvider\n * 'id' : id attribute value to assign to the new DOM node\n * return : created DOM element\n *\n * @param  {SearchResult} result\n * @param  {string} id\n * @return {Element}\n */\n\n\nSearchPad.prototype._createResultNode = function (result, id) {\n  var node = domify(SearchPad.RESULT_HTML); // create only if available\n\n  if (result.primaryTokens.length > 0) {\n    createInnerTextNode(node, result.primaryTokens, SearchPad.RESULT_PRIMARY_HTML);\n  } // secondary tokens (represent element ID) are allways available\n\n\n  createInnerTextNode(node, result.secondaryTokens, SearchPad.RESULT_SECONDARY_HTML);\n  domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE, id);\n\n  this._resultsContainer.appendChild(node);\n\n  return node;\n};\n/**\n * Register search element provider.\n *\n * SearchProvider.find - provides search function over own elements\n *  (pattern) => [{ text: <String>, element: <Element>}, ...]\n *\n * @param  {SearchProvider} provider\n */\n\n\nSearchPad.prototype.registerProvider = function (provider) {\n  this._searchProvider = provider;\n};\n/**\n * Open search pad.\n */\n\n\nSearchPad.prototype.open = function () {\n  if (!this._searchProvider) {\n    throw new Error('no search provider registered');\n  }\n\n  if (this.isOpen()) {\n    return;\n  }\n\n  this._bindEvents();\n\n  this._open = true;\n  domClasses(this._container).add('open');\n\n  this._searchInput.focus();\n\n  this._eventBus.fire('searchPad.opened');\n};\n/**\n * Close search pad.\n */\n\n\nSearchPad.prototype.close = function () {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._unbindEvents();\n\n  this._open = false;\n  domClasses(this._container).remove('open');\n\n  this._clearResults();\n\n  this._searchInput.value = '';\n\n  this._searchInput.blur();\n\n  this._resetOverlay();\n\n  this._eventBus.fire('searchPad.closed');\n};\n/**\n * Toggles search pad on/off.\n */\n\n\nSearchPad.prototype.toggle = function () {\n  this.isOpen() ? this.close() : this.open();\n};\n/**\n * Report state of search pad.\n */\n\n\nSearchPad.prototype.isOpen = function () {\n  return this._open;\n};\n/**\n * Preselect result entry.\n *\n * @param  {Element} element\n */\n\n\nSearchPad.prototype._preselect = function (node) {\n  var selectedNode = this._getCurrentResult(); // already selected\n\n\n  if (node === selectedNode) {\n    return;\n  } // removing preselection from current node\n\n\n  if (selectedNode) {\n    domClasses(selectedNode).remove(SearchPad.RESULT_SELECTED_CLASS);\n  }\n\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n  domClasses(node).add(SearchPad.RESULT_SELECTED_CLASS);\n\n  this._resetOverlay(element);\n\n  this._canvas.scrollToElement(element, {\n    top: 400\n  });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.preselected', element);\n};\n/**\n * Select result node.\n *\n * @param  {Element} element\n */\n\n\nSearchPad.prototype._select = function (node) {\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n  this.close();\n\n  this._resetOverlay();\n\n  this._canvas.scrollToElement(element, {\n    top: 400\n  });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.selected', element);\n};\n/**\n * Reset overlay removes and, optionally, set\n * overlay to a new element.\n *\n * @param  {Element} element\n */\n\n\nSearchPad.prototype._resetOverlay = function (element) {\n  if (this._overlayId) {\n    this._overlays.remove(this._overlayId);\n  }\n\n  if (element) {\n    var box = getBoundingBox(element);\n    var overlay = constructOverlay(box);\n    this._overlayId = this._overlays.add(element, overlay);\n  }\n};\n/**\n * Construct overlay object for the given bounding box.\n *\n * @param  {BoundingBox} box\n * @return {Object}\n */\n\n\nfunction constructOverlay(box) {\n  var offset = 6;\n  var w = box.width + offset * 2;\n  var h = box.height + offset * 2;\n  var styles = {\n    width: w + 'px',\n    height: h + 'px'\n  };\n  var html = domify('<div class=\"' + SearchPad.OVERLAY_CLASS + '\"></div>');\n  assignStyle(html, styles);\n  return {\n    position: {\n      bottom: h - offset,\n      right: w - offset\n    },\n    show: true,\n    html: html\n  };\n}\n/**\n * Creates and appends child node from result tokens and HTML template.\n *\n * @param  {Element} node\n * @param  {Array<Object>} tokens\n * @param  {string} template\n */\n\n\nfunction createInnerTextNode(parentNode, tokens, template) {\n  var text = createHtmlText(tokens);\n  var childNode = domify(template);\n  childNode.innerHTML = text;\n  parentNode.appendChild(childNode);\n}\n/**\n * Create internal HTML markup from result tokens.\n * Caters for highlighting pattern matched tokens.\n *\n * @param  {Array<Object>} tokens\n * @return {string}\n */\n\n\nfunction createHtmlText(tokens) {\n  var htmlText = '';\n  tokens.forEach(function (t) {\n    if (t.matched) {\n      htmlText += '<strong class=\"' + SearchPad.RESULT_HIGHLIGHT_CLASS + '\">' + escapeHTML(t.matched) + '</strong>';\n    } else {\n      htmlText += escapeHTML(t.normal);\n    }\n  });\n  return htmlText !== '' ? htmlText : null;\n}\n/**\n * CONSTANTS\n */\n\n\nSearchPad.CONTAINER_SELECTOR = '.djs-search-container';\nSearchPad.INPUT_SELECTOR = '.djs-search-input input';\nSearchPad.RESULTS_CONTAINER_SELECTOR = '.djs-search-results';\nSearchPad.RESULT_SELECTOR = '.djs-search-result';\nSearchPad.RESULT_SELECTED_CLASS = 'djs-search-result-selected';\nSearchPad.RESULT_SELECTED_SELECTOR = '.' + SearchPad.RESULT_SELECTED_CLASS;\nSearchPad.RESULT_ID_ATTRIBUTE = 'data-result-id';\nSearchPad.RESULT_HIGHLIGHT_CLASS = 'djs-search-highlight';\nSearchPad.OVERLAY_CLASS = 'djs-search-overlay';\nSearchPad.BOX_HTML = '<div class=\"djs-search-container djs-draggable djs-scrollable\">' + '<div class=\"djs-search-input\">' + '<input type=\"text\"/>' + '</div>' + '<div class=\"djs-search-results\"></div>' + '</div>';\nSearchPad.RESULT_HTML = '<div class=\"djs-search-result\"></div>';\nSearchPad.RESULT_PRIMARY_HTML = '<div class=\"djs-search-result-primary\"></div>';\nSearchPad.RESULT_SECONDARY_HTML = '<p class=\"djs-search-result-secondary\"></p>';","map":{"version":3,"names":["assignStyle","clear","domClear","delegate","domDelegate","query","domQuery","classes","domClasses","attr","domAttr","domify","getBBox","getBoundingBox","escapeHTML","SearchPad","canvas","eventBus","overlays","selection","_open","_results","_eventMaps","_canvas","_eventBus","_overlays","_selection","_container","BOX_HTML","_searchInput","INPUT_SELECTOR","_resultsContainer","RESULTS_CONTAINER_SELECTOR","getContainer","appendChild","on","close","$inject","prototype","_bindEvents","self","listen","el","selector","type","fn","push","listener","bind","document","e","stopPropagation","delegateTarget","focus","RESULT_SELECTOR","_scrollToNode","_preselect","_select","keyCode","preventDefault","selected","_getCurrentResult","_scrollToDirection","_search","value","_unbindEvents","forEach","m","unbind","pattern","_clearResults","searchResults","_searchProvider","find","length","result","id","element","node","_createResultNode","previous","previousElementSibling","nextElementSibling","nodeOffset","offsetTop","containerScroll","scrollTop","bottomScroll","clientHeight","_resetOverlay","fire","RESULT_SELECTED_SELECTOR","RESULT_HTML","primaryTokens","createInnerTextNode","RESULT_PRIMARY_HTML","secondaryTokens","RESULT_SECONDARY_HTML","RESULT_ID_ATTRIBUTE","registerProvider","provider","open","Error","isOpen","add","remove","blur","toggle","selectedNode","RESULT_SELECTED_CLASS","scrollToElement","top","select","_overlayId","box","overlay","constructOverlay","offset","w","width","h","height","styles","html","OVERLAY_CLASS","position","bottom","right","show","parentNode","tokens","template","text","createHtmlText","childNode","innerHTML","htmlText","t","matched","RESULT_HIGHLIGHT_CLASS","normal","CONTAINER_SELECTOR"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/diagram-js/lib/features/search-pad/SearchPad.js"],"sourcesContent":["import {\n  assignStyle,\n  clear as domClear,\n  delegate as domDelegate,\n  query as domQuery,\n  classes as domClasses,\n  attr as domAttr,\n  domify as domify\n} from 'min-dom';\n\nimport {\n  getBBox as getBoundingBox\n} from '../../util/Elements';\n\nimport {\n  escapeHTML\n} from '../../util/EscapeUtil';\n\n/**\n * Provides searching infrastructure\n */\nexport default function SearchPad(canvas, eventBus, overlays, selection) {\n  this._open = false;\n  this._results = [];\n  this._eventMaps = [];\n\n  this._canvas = canvas;\n  this._eventBus = eventBus;\n  this._overlays = overlays;\n  this._selection = selection;\n\n  // setup elements\n  this._container = domify(SearchPad.BOX_HTML);\n  this._searchInput = domQuery(SearchPad.INPUT_SELECTOR, this._container);\n  this._resultsContainer = domQuery(SearchPad.RESULTS_CONTAINER_SELECTOR, this._container);\n\n  // attach search pad\n  this._canvas.getContainer().appendChild(this._container);\n\n  // cleanup on destroy\n  eventBus.on([ 'canvas.destroy', 'diagram.destroy' ], this.close, this);\n}\n\n\nSearchPad.$inject = [\n  'canvas',\n  'eventBus',\n  'overlays',\n  'selection'\n];\n\n\n/**\n * Binds and keeps track of all event listereners\n */\nSearchPad.prototype._bindEvents = function() {\n  var self = this;\n\n  function listen(el, selector, type, fn) {\n    self._eventMaps.push({\n      el: el,\n      type: type,\n      listener: domDelegate.bind(el, selector, type, fn)\n    });\n  }\n\n  // close search on clicking anywhere outside\n  listen(document, 'html', 'click', function(e) {\n    self.close();\n  });\n\n  // stop event from propagating and closing search\n  // focus on input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    e.delegateTarget.focus();\n  });\n\n  // preselect result on hover\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'mouseover', function(e) {\n    e.stopPropagation();\n    self._scrollToNode(e.delegateTarget);\n    self._preselect(e.delegateTarget);\n  });\n\n  // selects desired result on mouse click\n  listen(this._container, SearchPad.RESULT_SELECTOR, 'click', function(e) {\n    e.stopPropagation();\n    self._select(e.delegateTarget);\n  });\n\n  // prevent cursor in input from going left and right when using up/down to\n  // navigate results\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keydown', function(e) {\n\n    // up\n    if (e.keyCode === 38) {\n      e.preventDefault();\n    }\n\n    // down\n    if (e.keyCode === 40) {\n      e.preventDefault();\n    }\n  });\n\n  // handle keyboard input\n  listen(this._container, SearchPad.INPUT_SELECTOR, 'keyup', function(e) {\n\n    // escape\n    if (e.keyCode === 27) {\n      return self.close();\n    }\n\n    // enter\n    if (e.keyCode === 13) {\n      var selected = self._getCurrentResult();\n\n      return selected ? self._select(selected) : self.close();\n    }\n\n    // up\n    if (e.keyCode === 38) {\n      return self._scrollToDirection(true);\n    }\n\n    // down\n    if (e.keyCode === 40) {\n      return self._scrollToDirection();\n    }\n\n    // left && right\n    // do not search while navigating text input\n    if (e.keyCode === 37 || e.keyCode === 39) {\n      return;\n    }\n\n    // anything else\n    self._search(e.delegateTarget.value);\n  });\n};\n\n\n/**\n * Unbinds all previously established listeners\n */\nSearchPad.prototype._unbindEvents = function() {\n  this._eventMaps.forEach(function(m) {\n    domDelegate.unbind(m.el, m.type, m.listener);\n  });\n};\n\n\n/**\n * Performs a search for the given pattern.\n *\n * @param  {string} pattern\n */\nSearchPad.prototype._search = function(pattern) {\n  var self = this;\n\n  this._clearResults();\n\n  // do not search on empty query\n  if (!pattern || pattern === '') {\n    return;\n  }\n\n  var searchResults = this._searchProvider.find(pattern);\n\n  if (!searchResults.length) {\n    return;\n  }\n\n  // append new results\n  searchResults.forEach(function(result) {\n    var id = result.element.id;\n    var node = self._createResultNode(result, id);\n    self._results[id] = {\n      element: result.element,\n      node: node\n    };\n  });\n\n  // preselect first result\n  var node = domQuery(SearchPad.RESULT_SELECTOR, this._resultsContainer);\n  this._scrollToNode(node);\n  this._preselect(node);\n};\n\n\n/**\n * Navigate to the previous/next result. Defaults to next result.\n * @param  {boolean} previous\n */\nSearchPad.prototype._scrollToDirection = function(previous) {\n  var selected = this._getCurrentResult();\n  if (!selected) {\n    return;\n  }\n\n  var node = previous ? selected.previousElementSibling : selected.nextElementSibling;\n  if (node) {\n    this._scrollToNode(node);\n    this._preselect(node);\n  }\n};\n\n\n/**\n * Scroll to the node if it is not visible.\n *\n * @param  {Element} node\n */\nSearchPad.prototype._scrollToNode = function(node) {\n  if (!node || node === this._getCurrentResult()) {\n    return;\n  }\n\n  var nodeOffset = node.offsetTop;\n  var containerScroll = this._resultsContainer.scrollTop;\n\n  var bottomScroll = nodeOffset - this._resultsContainer.clientHeight + node.clientHeight;\n\n  if (nodeOffset < containerScroll) {\n    this._resultsContainer.scrollTop = nodeOffset;\n  } else if (containerScroll < bottomScroll) {\n    this._resultsContainer.scrollTop = bottomScroll;\n  }\n};\n\n\n/**\n * Clears all results data.\n */\nSearchPad.prototype._clearResults = function() {\n  domClear(this._resultsContainer);\n\n  this._results = [];\n\n  this._resetOverlay();\n\n  this._eventBus.fire('searchPad.cleared');\n};\n\n\n/**\n * Get currently selected result.\n *\n * @return {Element}\n */\nSearchPad.prototype._getCurrentResult = function() {\n  return domQuery(SearchPad.RESULT_SELECTED_SELECTOR, this._resultsContainer);\n};\n\n\n/**\n * Create result DOM element within results container\n * that corresponds to a search result.\n *\n * 'result' : one of the elements returned by SearchProvider\n * 'id' : id attribute value to assign to the new DOM node\n * return : created DOM element\n *\n * @param  {SearchResult} result\n * @param  {string} id\n * @return {Element}\n */\nSearchPad.prototype._createResultNode = function(result, id) {\n  var node = domify(SearchPad.RESULT_HTML);\n\n  // create only if available\n  if (result.primaryTokens.length > 0) {\n    createInnerTextNode(node, result.primaryTokens, SearchPad.RESULT_PRIMARY_HTML);\n  }\n\n  // secondary tokens (represent element ID) are allways available\n  createInnerTextNode(node, result.secondaryTokens, SearchPad.RESULT_SECONDARY_HTML);\n\n  domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE, id);\n\n  this._resultsContainer.appendChild(node);\n\n  return node;\n};\n\n\n/**\n * Register search element provider.\n *\n * SearchProvider.find - provides search function over own elements\n *  (pattern) => [{ text: <String>, element: <Element>}, ...]\n *\n * @param  {SearchProvider} provider\n */\nSearchPad.prototype.registerProvider = function(provider) {\n  this._searchProvider = provider;\n};\n\n\n/**\n * Open search pad.\n */\nSearchPad.prototype.open = function() {\n  if (!this._searchProvider) {\n    throw new Error('no search provider registered');\n  }\n\n  if (this.isOpen()) {\n    return;\n  }\n\n  this._bindEvents();\n\n  this._open = true;\n\n  domClasses(this._container).add('open');\n\n  this._searchInput.focus();\n\n  this._eventBus.fire('searchPad.opened');\n};\n\n\n/**\n * Close search pad.\n */\nSearchPad.prototype.close = function() {\n  if (!this.isOpen()) {\n    return;\n  }\n\n  this._unbindEvents();\n\n  this._open = false;\n\n  domClasses(this._container).remove('open');\n\n  this._clearResults();\n\n  this._searchInput.value = '';\n  this._searchInput.blur();\n\n  this._resetOverlay();\n\n  this._eventBus.fire('searchPad.closed');\n};\n\n\n/**\n * Toggles search pad on/off.\n */\nSearchPad.prototype.toggle = function() {\n  this.isOpen() ? this.close() : this.open();\n};\n\n\n/**\n * Report state of search pad.\n */\nSearchPad.prototype.isOpen = function() {\n  return this._open;\n};\n\n\n/**\n * Preselect result entry.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._preselect = function(node) {\n  var selectedNode = this._getCurrentResult();\n\n  // already selected\n  if (node === selectedNode) {\n    return;\n  }\n\n  // removing preselection from current node\n  if (selectedNode) {\n    domClasses(selectedNode).remove(SearchPad.RESULT_SELECTED_CLASS);\n  }\n\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  domClasses(node).add(SearchPad.RESULT_SELECTED_CLASS);\n\n  this._resetOverlay(element);\n\n  this._canvas.scrollToElement(element, { top: 400 });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.preselected', element);\n};\n\n\n/**\n * Select result node.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._select = function(node) {\n  var id = domAttr(node, SearchPad.RESULT_ID_ATTRIBUTE);\n  var element = this._results[id].element;\n\n  this.close();\n\n  this._resetOverlay();\n\n  this._canvas.scrollToElement(element, { top: 400 });\n\n  this._selection.select(element);\n\n  this._eventBus.fire('searchPad.selected', element);\n};\n\n\n/**\n * Reset overlay removes and, optionally, set\n * overlay to a new element.\n *\n * @param  {Element} element\n */\nSearchPad.prototype._resetOverlay = function(element) {\n  if (this._overlayId) {\n    this._overlays.remove(this._overlayId);\n  }\n\n  if (element) {\n    var box = getBoundingBox(element);\n    var overlay = constructOverlay(box);\n    this._overlayId = this._overlays.add(element, overlay);\n  }\n};\n\n\n/**\n * Construct overlay object for the given bounding box.\n *\n * @param  {BoundingBox} box\n * @return {Object}\n */\nfunction constructOverlay(box) {\n\n  var offset = 6;\n  var w = box.width + offset * 2;\n  var h = box.height + offset * 2;\n\n  var styles = {\n    width: w + 'px',\n    height: h + 'px'\n  };\n\n  var html = domify('<div class=\"' + SearchPad.OVERLAY_CLASS + '\"></div>');\n\n  assignStyle(html, styles);\n\n  return {\n    position: {\n      bottom: h - offset,\n      right: w - offset\n    },\n    show: true,\n    html: html\n  };\n}\n\n\n/**\n * Creates and appends child node from result tokens and HTML template.\n *\n * @param  {Element} node\n * @param  {Array<Object>} tokens\n * @param  {string} template\n */\nfunction createInnerTextNode(parentNode, tokens, template) {\n  var text = createHtmlText(tokens);\n  var childNode = domify(template);\n  childNode.innerHTML = text;\n  parentNode.appendChild(childNode);\n}\n\n/**\n * Create internal HTML markup from result tokens.\n * Caters for highlighting pattern matched tokens.\n *\n * @param  {Array<Object>} tokens\n * @return {string}\n */\nfunction createHtmlText(tokens) {\n  var htmlText = '';\n\n  tokens.forEach(function(t) {\n    if (t.matched) {\n      htmlText += '<strong class=\"' + SearchPad.RESULT_HIGHLIGHT_CLASS + '\">' + escapeHTML(t.matched) + '</strong>';\n    } else {\n      htmlText += escapeHTML(t.normal);\n    }\n  });\n\n  return htmlText !== '' ? htmlText : null;\n}\n\n\n/**\n * CONSTANTS\n */\nSearchPad.CONTAINER_SELECTOR = '.djs-search-container';\nSearchPad.INPUT_SELECTOR = '.djs-search-input input';\nSearchPad.RESULTS_CONTAINER_SELECTOR = '.djs-search-results';\nSearchPad.RESULT_SELECTOR = '.djs-search-result';\nSearchPad.RESULT_SELECTED_CLASS = 'djs-search-result-selected';\nSearchPad.RESULT_SELECTED_SELECTOR = '.' + SearchPad.RESULT_SELECTED_CLASS;\nSearchPad.RESULT_ID_ATTRIBUTE = 'data-result-id';\nSearchPad.RESULT_HIGHLIGHT_CLASS = 'djs-search-highlight';\nSearchPad.OVERLAY_CLASS = 'djs-search-overlay';\n\nSearchPad.BOX_HTML =\n  '<div class=\"djs-search-container djs-draggable djs-scrollable\">' +\n    '<div class=\"djs-search-input\">' +\n      '<input type=\"text\"/>' +\n    '</div>' +\n    '<div class=\"djs-search-results\"></div>' +\n  '</div>';\n\nSearchPad.RESULT_HTML =\n  '<div class=\"djs-search-result\"></div>';\n\nSearchPad.RESULT_PRIMARY_HTML =\n  '<div class=\"djs-search-result-primary\"></div>';\n\nSearchPad.RESULT_SECONDARY_HTML =\n  '<p class=\"djs-search-result-secondary\"></p>';\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}