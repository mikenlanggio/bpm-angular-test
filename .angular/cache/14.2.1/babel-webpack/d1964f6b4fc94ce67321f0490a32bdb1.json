{"ast":null,"code":"import { getDi } from '../../util/ModelUtil';\nimport { filter, forEach, map } from 'min-dash';\nimport { selfAndAllChildren } from 'diagram-js/lib/util/Elements';\nvar HIGH_PRIORITY = 2000;\nexport default function BpmnDiOrdering(eventBus, canvas) {\n  eventBus.on('saveXML.start', HIGH_PRIORITY, orderDi);\n\n  function orderDi() {\n    var rootElements = canvas.getRootElements();\n    forEach(rootElements, function (root) {\n      var rootDi = getDi(root),\n          elements,\n          diElements;\n      elements = selfAndAllChildren([root], false); // only bpmndi:Shape and bpmndi:Edge can be direct children of bpmndi:Plane\n\n      elements = filter(elements, function (element) {\n        return element !== root && !element.labelTarget;\n      });\n      diElements = map(elements, getDi);\n      rootDi.set('planeElement', diElements);\n    });\n  }\n}\nBpmnDiOrdering.$inject = ['eventBus', 'canvas'];","map":{"version":3,"names":["getDi","filter","forEach","map","selfAndAllChildren","HIGH_PRIORITY","BpmnDiOrdering","eventBus","canvas","on","orderDi","rootElements","getRootElements","root","rootDi","elements","diElements","element","labelTarget","set","$inject"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/di-ordering/BpmnDiOrdering.js"],"sourcesContent":["import { getDi } from '../../util/ModelUtil';\n\nimport {\n  filter,\n  forEach,\n  map\n} from 'min-dash';\n\nimport { selfAndAllChildren } from 'diagram-js/lib/util/Elements';\n\n\nvar HIGH_PRIORITY = 2000;\n\nexport default function BpmnDiOrdering(eventBus, canvas) {\n\n  eventBus.on('saveXML.start', HIGH_PRIORITY, orderDi);\n\n  function orderDi() {\n    var rootElements = canvas.getRootElements();\n\n    forEach(rootElements, function(root) {\n      var rootDi = getDi(root),\n          elements,\n          diElements;\n\n      elements = selfAndAllChildren([ root ], false);\n\n      // only bpmndi:Shape and bpmndi:Edge can be direct children of bpmndi:Plane\n      elements = filter(elements, function(element) {\n        return element !== root && !element.labelTarget;\n      });\n\n      diElements = map(elements, getDi);\n\n      rootDi.set('planeElement', diElements);\n    });\n  }\n}\n\nBpmnDiOrdering.$inject = [ 'eventBus', 'canvas' ];\n"],"mappings":"AAAA,SAASA,KAAT,QAAsB,sBAAtB;AAEA,SACEC,MADF,EAEEC,OAFF,EAGEC,GAHF,QAIO,UAJP;AAMA,SAASC,kBAAT,QAAmC,8BAAnC;AAGA,IAAIC,aAAa,GAAG,IAApB;AAEA,eAAe,SAASC,cAAT,CAAwBC,QAAxB,EAAkCC,MAAlC,EAA0C;EAEvDD,QAAQ,CAACE,EAAT,CAAY,eAAZ,EAA6BJ,aAA7B,EAA4CK,OAA5C;;EAEA,SAASA,OAAT,GAAmB;IACjB,IAAIC,YAAY,GAAGH,MAAM,CAACI,eAAP,EAAnB;IAEAV,OAAO,CAACS,YAAD,EAAe,UAASE,IAAT,EAAe;MACnC,IAAIC,MAAM,GAAGd,KAAK,CAACa,IAAD,CAAlB;MAAA,IACIE,QADJ;MAAA,IAEIC,UAFJ;MAIAD,QAAQ,GAAGX,kBAAkB,CAAC,CAAES,IAAF,CAAD,EAAW,KAAX,CAA7B,CALmC,CAOnC;;MACAE,QAAQ,GAAGd,MAAM,CAACc,QAAD,EAAW,UAASE,OAAT,EAAkB;QAC5C,OAAOA,OAAO,KAAKJ,IAAZ,IAAoB,CAACI,OAAO,CAACC,WAApC;MACD,CAFgB,CAAjB;MAIAF,UAAU,GAAGb,GAAG,CAACY,QAAD,EAAWf,KAAX,CAAhB;MAEAc,MAAM,CAACK,GAAP,CAAW,cAAX,EAA2BH,UAA3B;IACD,CAfM,CAAP;EAgBD;AACF;AAEDV,cAAc,CAACc,OAAf,GAAyB,CAAE,UAAF,EAAc,QAAd,CAAzB"},"metadata":{},"sourceType":"module"}