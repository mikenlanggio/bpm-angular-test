{"ast":null,"code":"import { map, assign, pick } from 'min-dash';\nimport { isAny } from './util/ModelingUtil';\nimport { is } from '../../util/ModelUtil';\nexport default function BpmnFactory(moddle) {\n  this._model = moddle;\n}\nBpmnFactory.$inject = ['moddle'];\n\nBpmnFactory.prototype._needsId = function (element) {\n  return isAny(element, ['bpmn:RootElement', 'bpmn:FlowElement', 'bpmn:MessageFlow', 'bpmn:DataAssociation', 'bpmn:Artifact', 'bpmn:Participant', 'bpmn:Lane', 'bpmn:LaneSet', 'bpmn:Process', 'bpmn:Collaboration', 'bpmndi:BPMNShape', 'bpmndi:BPMNEdge', 'bpmndi:BPMNDiagram', 'bpmndi:BPMNPlane', 'bpmn:Property', 'bpmn:CategoryValue']);\n};\n\nBpmnFactory.prototype._ensureId = function (element) {\n  if (element.id) {\n    this._model.ids.claim(element.id, element);\n\n    return;\n  } // generate semantic ids for elements\n  // bpmn:SequenceFlow -> SequenceFlow_ID\n\n\n  var prefix;\n\n  if (is(element, 'bpmn:Activity')) {\n    prefix = 'Activity';\n  } else if (is(element, 'bpmn:Event')) {\n    prefix = 'Event';\n  } else if (is(element, 'bpmn:Gateway')) {\n    prefix = 'Gateway';\n  } else if (isAny(element, ['bpmn:SequenceFlow', 'bpmn:MessageFlow'])) {\n    prefix = 'Flow';\n  } else {\n    prefix = (element.$type || '').replace(/^[^:]*:/g, '');\n  }\n\n  prefix += '_';\n\n  if (!element.id && this._needsId(element)) {\n    element.id = this._model.ids.nextPrefixed(prefix, element);\n  }\n};\n\nBpmnFactory.prototype.create = function (type, attrs) {\n  var element = this._model.create(type, attrs || {});\n\n  this._ensureId(element);\n\n  return element;\n};\n\nBpmnFactory.prototype.createDiLabel = function () {\n  return this.create('bpmndi:BPMNLabel', {\n    bounds: this.createDiBounds()\n  });\n};\n\nBpmnFactory.prototype.createDiShape = function (semantic, attrs) {\n  return this.create('bpmndi:BPMNShape', assign({\n    bpmnElement: semantic,\n    bounds: this.createDiBounds()\n  }, attrs));\n};\n\nBpmnFactory.prototype.createDiBounds = function (bounds) {\n  return this.create('dc:Bounds', bounds);\n};\n\nBpmnFactory.prototype.createDiWaypoints = function (waypoints) {\n  var self = this;\n  return map(waypoints, function (pos) {\n    return self.createDiWaypoint(pos);\n  });\n};\n\nBpmnFactory.prototype.createDiWaypoint = function (point) {\n  return this.create('dc:Point', pick(point, ['x', 'y']));\n};\n\nBpmnFactory.prototype.createDiEdge = function (semantic, attrs) {\n  return this.create('bpmndi:BPMNEdge', assign({\n    bpmnElement: semantic,\n    waypoint: this.createDiWaypoints([])\n  }, attrs));\n};\n\nBpmnFactory.prototype.createDiPlane = function (semantic, attrs) {\n  return this.create('bpmndi:BPMNPlane', assign({\n    bpmnElement: semantic\n  }, attrs));\n};","map":{"version":3,"names":["map","assign","pick","isAny","is","BpmnFactory","moddle","_model","$inject","prototype","_needsId","element","_ensureId","id","ids","claim","prefix","$type","replace","nextPrefixed","create","type","attrs","createDiLabel","bounds","createDiBounds","createDiShape","semantic","bpmnElement","createDiWaypoints","waypoints","self","pos","createDiWaypoint","point","createDiEdge","waypoint","createDiPlane"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/modeling/BpmnFactory.js"],"sourcesContent":["import {\n  map,\n  assign,\n  pick\n} from 'min-dash';\n\nimport {\n  isAny\n} from './util/ModelingUtil';\n\nimport {\n  is\n} from '../../util/ModelUtil';\n\n\nexport default function BpmnFactory(moddle) {\n  this._model = moddle;\n}\n\nBpmnFactory.$inject = [ 'moddle' ];\n\n\nBpmnFactory.prototype._needsId = function(element) {\n  return isAny(element, [\n    'bpmn:RootElement',\n    'bpmn:FlowElement',\n    'bpmn:MessageFlow',\n    'bpmn:DataAssociation',\n    'bpmn:Artifact',\n    'bpmn:Participant',\n    'bpmn:Lane',\n    'bpmn:LaneSet',\n    'bpmn:Process',\n    'bpmn:Collaboration',\n    'bpmndi:BPMNShape',\n    'bpmndi:BPMNEdge',\n    'bpmndi:BPMNDiagram',\n    'bpmndi:BPMNPlane',\n    'bpmn:Property',\n    'bpmn:CategoryValue'\n  ]);\n};\n\nBpmnFactory.prototype._ensureId = function(element) {\n  if (element.id) {\n    this._model.ids.claim(element.id, element);\n    return;\n  }\n\n  // generate semantic ids for elements\n  // bpmn:SequenceFlow -> SequenceFlow_ID\n  var prefix;\n\n  if (is(element, 'bpmn:Activity')) {\n    prefix = 'Activity';\n  } else if (is(element, 'bpmn:Event')) {\n    prefix = 'Event';\n  } else if (is(element, 'bpmn:Gateway')) {\n    prefix = 'Gateway';\n  } else if (isAny(element, [ 'bpmn:SequenceFlow', 'bpmn:MessageFlow' ])) {\n    prefix = 'Flow';\n  } else {\n    prefix = (element.$type || '').replace(/^[^:]*:/g, '');\n  }\n\n  prefix += '_';\n\n  if (!element.id && this._needsId(element)) {\n    element.id = this._model.ids.nextPrefixed(prefix, element);\n  }\n};\n\n\nBpmnFactory.prototype.create = function(type, attrs) {\n  var element = this._model.create(type, attrs || {});\n\n  this._ensureId(element);\n\n  return element;\n};\n\n\nBpmnFactory.prototype.createDiLabel = function() {\n  return this.create('bpmndi:BPMNLabel', {\n    bounds: this.createDiBounds()\n  });\n};\n\n\nBpmnFactory.prototype.createDiShape = function(semantic, attrs) {\n  return this.create('bpmndi:BPMNShape', assign({\n    bpmnElement: semantic,\n    bounds: this.createDiBounds()\n  }, attrs));\n};\n\n\nBpmnFactory.prototype.createDiBounds = function(bounds) {\n  return this.create('dc:Bounds', bounds);\n};\n\n\nBpmnFactory.prototype.createDiWaypoints = function(waypoints) {\n  var self = this;\n\n  return map(waypoints, function(pos) {\n    return self.createDiWaypoint(pos);\n  });\n};\n\nBpmnFactory.prototype.createDiWaypoint = function(point) {\n  return this.create('dc:Point', pick(point, [ 'x', 'y' ]));\n};\n\n\nBpmnFactory.prototype.createDiEdge = function(semantic, attrs) {\n  return this.create('bpmndi:BPMNEdge', assign({\n    bpmnElement: semantic,\n    waypoint: this.createDiWaypoints([])\n  }, attrs));\n};\n\nBpmnFactory.prototype.createDiPlane = function(semantic, attrs) {\n  return this.create('bpmndi:BPMNPlane', assign({\n    bpmnElement: semantic\n  }, attrs));\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}