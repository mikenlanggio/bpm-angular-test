{"ast":null,"code":"export default function CreateConnectionHandler(canvas, layouter) {\n  this._canvas = canvas;\n  this._layouter = layouter;\n}\nCreateConnectionHandler.$inject = ['canvas', 'layouter']; // api //////////////////////\n\n/**\n * Appends a shape to a target shape\n *\n * @param {Object} context\n * @param {djs.element.Base} context.source the source object\n * @param {djs.element.Base} context.target the parent object\n * @param {Point} context.position position of the new element\n */\n\nCreateConnectionHandler.prototype.execute = function (context) {\n  var connection = context.connection,\n      source = context.source,\n      target = context.target,\n      parent = context.parent,\n      parentIndex = context.parentIndex,\n      hints = context.hints;\n\n  if (!source || !target) {\n    throw new Error('source and target required');\n  }\n\n  if (!parent) {\n    throw new Error('parent required');\n  }\n\n  connection.source = source;\n  connection.target = target;\n\n  if (!connection.waypoints) {\n    connection.waypoints = this._layouter.layoutConnection(connection, hints);\n  } // add connection\n\n\n  this._canvas.addConnection(connection, parent, parentIndex);\n\n  return connection;\n};\n\nCreateConnectionHandler.prototype.revert = function (context) {\n  var connection = context.connection;\n\n  this._canvas.removeConnection(connection);\n\n  connection.source = null;\n  connection.target = null;\n  return connection;\n};","map":{"version":3,"names":["CreateConnectionHandler","canvas","layouter","_canvas","_layouter","$inject","prototype","execute","context","connection","source","target","parent","parentIndex","hints","Error","waypoints","layoutConnection","addConnection","revert","removeConnection"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/diagram-js/lib/features/modeling/cmd/CreateConnectionHandler.js"],"sourcesContent":["export default function CreateConnectionHandler(canvas, layouter) {\n  this._canvas = canvas;\n  this._layouter = layouter;\n}\n\nCreateConnectionHandler.$inject = [ 'canvas', 'layouter' ];\n\n\n// api //////////////////////\n\n\n/**\n * Appends a shape to a target shape\n *\n * @param {Object} context\n * @param {djs.element.Base} context.source the source object\n * @param {djs.element.Base} context.target the parent object\n * @param {Point} context.position position of the new element\n */\nCreateConnectionHandler.prototype.execute = function(context) {\n\n  var connection = context.connection,\n      source = context.source,\n      target = context.target,\n      parent = context.parent,\n      parentIndex = context.parentIndex,\n      hints = context.hints;\n\n  if (!source || !target) {\n    throw new Error('source and target required');\n  }\n\n  if (!parent) {\n    throw new Error('parent required');\n  }\n\n  connection.source = source;\n  connection.target = target;\n\n  if (!connection.waypoints) {\n    connection.waypoints = this._layouter.layoutConnection(connection, hints);\n  }\n\n  // add connection\n  this._canvas.addConnection(connection, parent, parentIndex);\n\n  return connection;\n};\n\nCreateConnectionHandler.prototype.revert = function(context) {\n  var connection = context.connection;\n\n  this._canvas.removeConnection(connection);\n\n  connection.source = null;\n  connection.target = null;\n\n  return connection;\n};"],"mappings":"AAAA,eAAe,SAASA,uBAAT,CAAiCC,MAAjC,EAAyCC,QAAzC,EAAmD;EAChE,KAAKC,OAAL,GAAeF,MAAf;EACA,KAAKG,SAAL,GAAiBF,QAAjB;AACD;AAEDF,uBAAuB,CAACK,OAAxB,GAAkC,CAAE,QAAF,EAAY,UAAZ,CAAlC,C,CAGA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAL,uBAAuB,CAACM,SAAxB,CAAkCC,OAAlC,GAA4C,UAASC,OAAT,EAAkB;EAE5D,IAAIC,UAAU,GAAGD,OAAO,CAACC,UAAzB;EAAA,IACIC,MAAM,GAAGF,OAAO,CAACE,MADrB;EAAA,IAEIC,MAAM,GAAGH,OAAO,CAACG,MAFrB;EAAA,IAGIC,MAAM,GAAGJ,OAAO,CAACI,MAHrB;EAAA,IAIIC,WAAW,GAAGL,OAAO,CAACK,WAJ1B;EAAA,IAKIC,KAAK,GAAGN,OAAO,CAACM,KALpB;;EAOA,IAAI,CAACJ,MAAD,IAAW,CAACC,MAAhB,EAAwB;IACtB,MAAM,IAAII,KAAJ,CAAU,4BAAV,CAAN;EACD;;EAED,IAAI,CAACH,MAAL,EAAa;IACX,MAAM,IAAIG,KAAJ,CAAU,iBAAV,CAAN;EACD;;EAEDN,UAAU,CAACC,MAAX,GAAoBA,MAApB;EACAD,UAAU,CAACE,MAAX,GAAoBA,MAApB;;EAEA,IAAI,CAACF,UAAU,CAACO,SAAhB,EAA2B;IACzBP,UAAU,CAACO,SAAX,GAAuB,KAAKZ,SAAL,CAAea,gBAAf,CAAgCR,UAAhC,EAA4CK,KAA5C,CAAvB;EACD,CAtB2D,CAwB5D;;;EACA,KAAKX,OAAL,CAAae,aAAb,CAA2BT,UAA3B,EAAuCG,MAAvC,EAA+CC,WAA/C;;EAEA,OAAOJ,UAAP;AACD,CA5BD;;AA8BAT,uBAAuB,CAACM,SAAxB,CAAkCa,MAAlC,GAA2C,UAASX,OAAT,EAAkB;EAC3D,IAAIC,UAAU,GAAGD,OAAO,CAACC,UAAzB;;EAEA,KAAKN,OAAL,CAAaiB,gBAAb,CAA8BX,UAA9B;;EAEAA,UAAU,CAACC,MAAX,GAAoB,IAApB;EACAD,UAAU,CAACE,MAAX,GAAoB,IAApB;EAEA,OAAOF,UAAP;AACD,CATD"},"metadata":{},"sourceType":"module"}