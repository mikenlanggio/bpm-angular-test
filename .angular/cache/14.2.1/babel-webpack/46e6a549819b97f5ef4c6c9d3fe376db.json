{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { is } from '../../../util/ModelUtil';\n/**\n * BPMN specific remove behavior\n */\n\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n  CommandInterceptor.call(this, eventBus);\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function (context) {\n    var shape = context.shape,\n        parent = shape.parent; // activate the behavior if the shape to be removed\n    // is a participant\n\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n  this.postExecute('shape.delete', function (context) {\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n      // replace empty collaboration with process diagram\n      modeling.makeProcess();\n    }\n  }, true);\n}\nRemoveParticipantBehavior.$inject = ['eventBus', 'modeling'];\ninherits(RemoveParticipantBehavior, CommandInterceptor);","map":{"version":3,"names":["inherits","CommandInterceptor","is","RemoveParticipantBehavior","eventBus","modeling","call","preExecute","context","shape","parent","collaborationRoot","postExecute","businessObject","participants","length","makeProcess","$inject"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/modeling/behavior/RemoveParticipantBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\n\n\n/**\n * BPMN specific remove behavior\n */\nexport default function RemoveParticipantBehavior(eventBus, modeling) {\n\n  CommandInterceptor.call(this, eventBus);\n\n\n  /**\n   * morph collaboration diagram into process diagram\n   * after the last participant has been removed\n   */\n\n  this.preExecute('shape.delete', function(context) {\n\n    var shape = context.shape,\n        parent = shape.parent;\n\n    // activate the behavior if the shape to be removed\n    // is a participant\n    if (is(shape, 'bpmn:Participant')) {\n      context.collaborationRoot = parent;\n    }\n  }, true);\n\n  this.postExecute('shape.delete', function(context) {\n\n    var collaborationRoot = context.collaborationRoot;\n\n    if (collaborationRoot && !collaborationRoot.businessObject.participants.length) {\n\n      // replace empty collaboration with process diagram\n      modeling.makeProcess();\n    }\n  }, true);\n\n}\n\nRemoveParticipantBehavior.$inject = [ 'eventBus', 'modeling' ];\n\ninherits(RemoveParticipantBehavior, CommandInterceptor);"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,kBAArB;AAEA,OAAOC,kBAAP,MAA+B,2CAA/B;AAEA,SAASC,EAAT,QAAmB,yBAAnB;AAGA;AACA;AACA;;AACA,eAAe,SAASC,yBAAT,CAAmCC,QAAnC,EAA6CC,QAA7C,EAAuD;EAEpEJ,kBAAkB,CAACK,IAAnB,CAAwB,IAAxB,EAA8BF,QAA9B;EAGA;AACF;AACA;AACA;;EAEE,KAAKG,UAAL,CAAgB,cAAhB,EAAgC,UAASC,OAAT,EAAkB;IAEhD,IAAIC,KAAK,GAAGD,OAAO,CAACC,KAApB;IAAA,IACIC,MAAM,GAAGD,KAAK,CAACC,MADnB,CAFgD,CAKhD;IACA;;IACA,IAAIR,EAAE,CAACO,KAAD,EAAQ,kBAAR,CAAN,EAAmC;MACjCD,OAAO,CAACG,iBAAR,GAA4BD,MAA5B;IACD;EACF,CAVD,EAUG,IAVH;EAYA,KAAKE,WAAL,CAAiB,cAAjB,EAAiC,UAASJ,OAAT,EAAkB;IAEjD,IAAIG,iBAAiB,GAAGH,OAAO,CAACG,iBAAhC;;IAEA,IAAIA,iBAAiB,IAAI,CAACA,iBAAiB,CAACE,cAAlB,CAAiCC,YAAjC,CAA8CC,MAAxE,EAAgF;MAE9E;MACAV,QAAQ,CAACW,WAAT;IACD;EACF,CATD,EASG,IATH;AAWD;AAEDb,yBAAyB,CAACc,OAA1B,GAAoC,CAAE,UAAF,EAAc,UAAd,CAApC;AAEAjB,QAAQ,CAACG,yBAAD,EAA4BF,kBAA5B,CAAR"},"metadata":{},"sourceType":"module"}