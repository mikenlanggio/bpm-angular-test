{"ast":null,"code":"import { forEach, isFunction, isArray, isNumber, isObject } from 'min-dash';\nvar DEFAULT_PRIORITY = 1000;\n/**\n * A utility that can be used to plug-in into the command execution for\n * extension and/or validation.\n *\n * @param {EventBus} eventBus\n *\n * @example\n *\n * import inherits from 'inherits-browser';\n *\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * function CommandLogger(eventBus) {\n *   CommandInterceptor.call(this, eventBus);\n *\n *   this.preExecute(function(event) {\n *     console.log('command pre-execute', event);\n *   });\n * }\n *\n * inherits(CommandLogger, CommandInterceptor);\n *\n */\n\nexport default function CommandInterceptor(eventBus) {\n  this._eventBus = eventBus;\n}\nCommandInterceptor.$inject = ['eventBus'];\n\nfunction unwrapEvent(fn, that) {\n  return function (event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n/**\n * Register an interceptor for a command execution\n *\n * @param {string|Array<string>} [events] list of commands to register on\n * @param {string} [hook] command hook, i.e. preExecute, executed to listen on\n * @param {number} [priority] the priority on which to hook into the execution\n * @param {Function} handlerFn interceptor to be invoked with (event)\n * @param {boolean} unwrap if true, unwrap the event and pass (context, command, event) to the\n *                          listener instead\n * @param {Object} [that] Pass context (`this`) to the handler function\n */\n\n\nCommandInterceptor.prototype.on = function (events, hook, priority, handlerFn, unwrap, that) {\n  if (isFunction(hook) || isNumber(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n\n  if (isFunction(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (isObject(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n\n  if (!isFunction(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n\n  if (!isArray(events)) {\n    events = [events];\n  }\n\n  var eventBus = this._eventBus;\n  forEach(events, function (event) {\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = ['commandStack', event, hook].filter(function (e) {\n      return e;\n    }).join('.');\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\nvar hooks = ['canExecute', 'preExecute', 'preExecuted', 'execute', 'executed', 'postExecute', 'postExecuted', 'revert', 'reverted'];\n/*\n * Install hook shortcuts\n *\n * This will generate the CommandInterceptor#(preExecute|...|reverted) methods\n * which will in term forward to CommandInterceptor#on.\n */\n\nforEach(hooks, function (hook) {\n  /**\n   * {canExecute|preExecute|preExecuted|execute|executed|postExecute|postExecuted|revert|reverted}\n   *\n   * A named hook for plugging into the command execution\n   *\n   * @param {string|Array<string>} [events] list of commands to register on\n   * @param {number} [priority] the priority on which to hook into the execution\n   * @param {Function} handlerFn interceptor to be invoked with (event)\n   * @param {boolean} [unwrap=false] if true, unwrap the event and pass (context, command, event) to the\n   *                          listener instead\n   * @param {Object} [that] Pass context (`this`) to the handler function\n   */\n  CommandInterceptor.prototype[hook] = function (events, priority, handlerFn, unwrap, that) {\n    if (isFunction(events) || isNumber(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n});","map":{"version":3,"names":["forEach","isFunction","isArray","isNumber","isObject","DEFAULT_PRIORITY","CommandInterceptor","eventBus","_eventBus","$inject","unwrapEvent","fn","that","event","call","context","command","prototype","on","events","hook","priority","handlerFn","unwrap","Error","fullEvent","filter","e","join","hooks"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/diagram-js/lib/command/CommandInterceptor.js"],"sourcesContent":["import {\n  forEach,\n  isFunction,\n  isArray,\n  isNumber,\n  isObject\n} from 'min-dash';\n\n\nvar DEFAULT_PRIORITY = 1000;\n\n/**\n * A utility that can be used to plug-in into the command execution for\n * extension and/or validation.\n *\n * @param {EventBus} eventBus\n *\n * @example\n *\n * import inherits from 'inherits-browser';\n *\n * import CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n *\n * function CommandLogger(eventBus) {\n *   CommandInterceptor.call(this, eventBus);\n *\n *   this.preExecute(function(event) {\n *     console.log('command pre-execute', event);\n *   });\n * }\n *\n * inherits(CommandLogger, CommandInterceptor);\n *\n */\nexport default function CommandInterceptor(eventBus) {\n  this._eventBus = eventBus;\n}\n\nCommandInterceptor.$inject = [ 'eventBus' ];\n\nfunction unwrapEvent(fn, that) {\n  return function(event) {\n    return fn.call(that || null, event.context, event.command, event);\n  };\n}\n\n/**\n * Register an interceptor for a command execution\n *\n * @param {string|Array<string>} [events] list of commands to register on\n * @param {string} [hook] command hook, i.e. preExecute, executed to listen on\n * @param {number} [priority] the priority on which to hook into the execution\n * @param {Function} handlerFn interceptor to be invoked with (event)\n * @param {boolean} unwrap if true, unwrap the event and pass (context, command, event) to the\n *                          listener instead\n * @param {Object} [that] Pass context (`this`) to the handler function\n */\nCommandInterceptor.prototype.on = function(events, hook, priority, handlerFn, unwrap, that) {\n\n  if (isFunction(hook) || isNumber(hook)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = hook;\n    hook = null;\n  }\n\n  if (isFunction(priority)) {\n    that = unwrap;\n    unwrap = handlerFn;\n    handlerFn = priority;\n    priority = DEFAULT_PRIORITY;\n  }\n\n  if (isObject(unwrap)) {\n    that = unwrap;\n    unwrap = false;\n  }\n\n  if (!isFunction(handlerFn)) {\n    throw new Error('handlerFn must be a function');\n  }\n\n  if (!isArray(events)) {\n    events = [ events ];\n  }\n\n  var eventBus = this._eventBus;\n\n  forEach(events, function(event) {\n\n    // concat commandStack(.event)?(.hook)?\n    var fullEvent = [ 'commandStack', event, hook ].filter(function(e) { return e; }).join('.');\n\n    eventBus.on(fullEvent, priority, unwrap ? unwrapEvent(handlerFn, that) : handlerFn, that);\n  });\n};\n\n\nvar hooks = [\n  'canExecute',\n  'preExecute',\n  'preExecuted',\n  'execute',\n  'executed',\n  'postExecute',\n  'postExecuted',\n  'revert',\n  'reverted'\n];\n\n/*\n * Install hook shortcuts\n *\n * This will generate the CommandInterceptor#(preExecute|...|reverted) methods\n * which will in term forward to CommandInterceptor#on.\n */\nforEach(hooks, function(hook) {\n\n  /**\n   * {canExecute|preExecute|preExecuted|execute|executed|postExecute|postExecuted|revert|reverted}\n   *\n   * A named hook for plugging into the command execution\n   *\n   * @param {string|Array<string>} [events] list of commands to register on\n   * @param {number} [priority] the priority on which to hook into the execution\n   * @param {Function} handlerFn interceptor to be invoked with (event)\n   * @param {boolean} [unwrap=false] if true, unwrap the event and pass (context, command, event) to the\n   *                          listener instead\n   * @param {Object} [that] Pass context (`this`) to the handler function\n   */\n  CommandInterceptor.prototype[hook] = function(events, priority, handlerFn, unwrap, that) {\n\n    if (isFunction(events) || isNumber(events)) {\n      that = unwrap;\n      unwrap = handlerFn;\n      handlerFn = priority;\n      priority = events;\n      events = null;\n    }\n\n    this.on(events, hook, priority, handlerFn, unwrap, that);\n  };\n});\n"],"mappings":"AAAA,SACEA,OADF,EAEEC,UAFF,EAGEC,OAHF,EAIEC,QAJF,EAKEC,QALF,QAMO,UANP;AASA,IAAIC,gBAAgB,GAAG,IAAvB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,kBAAT,CAA4BC,QAA5B,EAAsC;EACnD,KAAKC,SAAL,GAAiBD,QAAjB;AACD;AAEDD,kBAAkB,CAACG,OAAnB,GAA6B,CAAE,UAAF,CAA7B;;AAEA,SAASC,WAAT,CAAqBC,EAArB,EAAyBC,IAAzB,EAA+B;EAC7B,OAAO,UAASC,KAAT,EAAgB;IACrB,OAAOF,EAAE,CAACG,IAAH,CAAQF,IAAI,IAAI,IAAhB,EAAsBC,KAAK,CAACE,OAA5B,EAAqCF,KAAK,CAACG,OAA3C,EAAoDH,KAApD,CAAP;EACD,CAFD;AAGD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAP,kBAAkB,CAACW,SAAnB,CAA6BC,EAA7B,GAAkC,UAASC,MAAT,EAAiBC,IAAjB,EAAuBC,QAAvB,EAAiCC,SAAjC,EAA4CC,MAA5C,EAAoDX,IAApD,EAA0D;EAE1F,IAAIX,UAAU,CAACmB,IAAD,CAAV,IAAoBjB,QAAQ,CAACiB,IAAD,CAAhC,EAAwC;IACtCR,IAAI,GAAGW,MAAP;IACAA,MAAM,GAAGD,SAAT;IACAA,SAAS,GAAGD,QAAZ;IACAA,QAAQ,GAAGD,IAAX;IACAA,IAAI,GAAG,IAAP;EACD;;EAED,IAAInB,UAAU,CAACoB,QAAD,CAAd,EAA0B;IACxBT,IAAI,GAAGW,MAAP;IACAA,MAAM,GAAGD,SAAT;IACAA,SAAS,GAAGD,QAAZ;IACAA,QAAQ,GAAGhB,gBAAX;EACD;;EAED,IAAID,QAAQ,CAACmB,MAAD,CAAZ,EAAsB;IACpBX,IAAI,GAAGW,MAAP;IACAA,MAAM,GAAG,KAAT;EACD;;EAED,IAAI,CAACtB,UAAU,CAACqB,SAAD,CAAf,EAA4B;IAC1B,MAAM,IAAIE,KAAJ,CAAU,8BAAV,CAAN;EACD;;EAED,IAAI,CAACtB,OAAO,CAACiB,MAAD,CAAZ,EAAsB;IACpBA,MAAM,GAAG,CAAEA,MAAF,CAAT;EACD;;EAED,IAAIZ,QAAQ,GAAG,KAAKC,SAApB;EAEAR,OAAO,CAACmB,MAAD,EAAS,UAASN,KAAT,EAAgB;IAE9B;IACA,IAAIY,SAAS,GAAG,CAAE,cAAF,EAAkBZ,KAAlB,EAAyBO,IAAzB,EAAgCM,MAAhC,CAAuC,UAASC,CAAT,EAAY;MAAE,OAAOA,CAAP;IAAW,CAAhE,EAAkEC,IAAlE,CAAuE,GAAvE,CAAhB;IAEArB,QAAQ,CAACW,EAAT,CAAYO,SAAZ,EAAuBJ,QAAvB,EAAiCE,MAAM,GAAGb,WAAW,CAACY,SAAD,EAAYV,IAAZ,CAAd,GAAkCU,SAAzE,EAAoFV,IAApF;EACD,CANM,CAAP;AAOD,CAvCD;;AA0CA,IAAIiB,KAAK,GAAG,CACV,YADU,EAEV,YAFU,EAGV,aAHU,EAIV,SAJU,EAKV,UALU,EAMV,aANU,EAOV,cAPU,EAQV,QARU,EASV,UATU,CAAZ;AAYA;AACA;AACA;AACA;AACA;AACA;;AACA7B,OAAO,CAAC6B,KAAD,EAAQ,UAAST,IAAT,EAAe;EAE5B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEd,kBAAkB,CAACW,SAAnB,CAA6BG,IAA7B,IAAqC,UAASD,MAAT,EAAiBE,QAAjB,EAA2BC,SAA3B,EAAsCC,MAAtC,EAA8CX,IAA9C,EAAoD;IAEvF,IAAIX,UAAU,CAACkB,MAAD,CAAV,IAAsBhB,QAAQ,CAACgB,MAAD,CAAlC,EAA4C;MAC1CP,IAAI,GAAGW,MAAP;MACAA,MAAM,GAAGD,SAAT;MACAA,SAAS,GAAGD,QAAZ;MACAA,QAAQ,GAAGF,MAAX;MACAA,MAAM,GAAG,IAAT;IACD;;IAED,KAAKD,EAAL,CAAQC,MAAR,EAAgBC,IAAhB,EAAsBC,QAAtB,EAAgCC,SAAhC,EAA2CC,MAA3C,EAAmDX,IAAnD;EACD,CAXD;AAYD,CA1BM,CAAP"},"metadata":{},"sourceType":"module"}