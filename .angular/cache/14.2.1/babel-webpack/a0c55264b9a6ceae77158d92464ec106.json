{"ast":null,"code":"import inherits from 'inherits-browser';\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\nimport { is } from '../../../util/ModelUtil';\nimport { isExpanded } from '../../../util/DiUtil';\nimport { isLabel } from '../../../util/LabelUtil';\n/**\n * Unclaims model IDs on element deletion.\n *\n * @param {Canvas} canvas\n * @param {Injector} injector\n * @param {Moddle} moddle\n * @param {Modeling} modeling\n */\n\nexport default function UnclaimIdBehavior(canvas, injector, moddle, modeling) {\n  injector.invoke(CommandInterceptor, this);\n  this.preExecute('shape.delete', function (event) {\n    var context = event.context,\n        shape = context.shape,\n        shapeBo = shape.businessObject;\n\n    if (isLabel(shape)) {\n      return;\n    }\n\n    if (is(shape, 'bpmn:Participant') && isExpanded(shape)) {\n      moddle.ids.unclaim(shapeBo.processRef.id);\n    }\n\n    modeling.unclaimId(shapeBo.id, shapeBo);\n  });\n  this.preExecute('connection.delete', function (event) {\n    var context = event.context,\n        connection = context.connection,\n        connectionBo = connection.businessObject;\n    modeling.unclaimId(connectionBo.id, connectionBo);\n  });\n  this.preExecute('canvas.updateRoot', function () {\n    var rootElement = canvas.getRootElement(),\n        rootElementBo = rootElement.businessObject;\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      moddle.ids.unclaim(rootElementBo.id);\n    }\n  });\n}\ninherits(UnclaimIdBehavior, CommandInterceptor);\nUnclaimIdBehavior.$inject = ['canvas', 'injector', 'moddle', 'modeling'];","map":{"version":3,"names":["inherits","CommandInterceptor","is","isExpanded","isLabel","UnclaimIdBehavior","canvas","injector","moddle","modeling","invoke","preExecute","event","context","shape","shapeBo","businessObject","ids","unclaim","processRef","id","unclaimId","connection","connectionBo","rootElement","getRootElement","rootElementBo","$inject"],"sources":["E:/Old_PC/Study/Angular/test-bpm/node_modules/bpmn-js/lib/features/modeling/behavior/UnclaimIdBehavior.js"],"sourcesContent":["import inherits from 'inherits-browser';\n\nimport CommandInterceptor from 'diagram-js/lib/command/CommandInterceptor';\n\nimport { is } from '../../../util/ModelUtil';\nimport { isExpanded } from '../../../util/DiUtil';\nimport { isLabel } from '../../../util/LabelUtil';\n\n\n/**\n * Unclaims model IDs on element deletion.\n *\n * @param {Canvas} canvas\n * @param {Injector} injector\n * @param {Moddle} moddle\n * @param {Modeling} modeling\n */\nexport default function UnclaimIdBehavior(canvas, injector, moddle, modeling) {\n  injector.invoke(CommandInterceptor, this);\n\n  this.preExecute('shape.delete', function(event) {\n    var context = event.context,\n        shape = context.shape,\n        shapeBo = shape.businessObject;\n\n    if (isLabel(shape)) {\n      return;\n    }\n\n    if (is(shape, 'bpmn:Participant') && isExpanded(shape)) {\n      moddle.ids.unclaim(shapeBo.processRef.id);\n    }\n\n    modeling.unclaimId(shapeBo.id, shapeBo);\n  });\n\n\n  this.preExecute('connection.delete', function(event) {\n    var context = event.context,\n        connection = context.connection,\n        connectionBo = connection.businessObject;\n\n    modeling.unclaimId(connectionBo.id, connectionBo);\n  });\n\n  this.preExecute('canvas.updateRoot', function() {\n    var rootElement = canvas.getRootElement(),\n        rootElementBo = rootElement.businessObject;\n\n    if (is(rootElement, 'bpmn:Collaboration')) {\n      moddle.ids.unclaim(rootElementBo.id);\n    }\n  });\n}\n\ninherits(UnclaimIdBehavior, CommandInterceptor);\n\nUnclaimIdBehavior.$inject = [ 'canvas', 'injector', 'moddle', 'modeling' ];"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,kBAArB;AAEA,OAAOC,kBAAP,MAA+B,2CAA/B;AAEA,SAASC,EAAT,QAAmB,yBAAnB;AACA,SAASC,UAAT,QAA2B,sBAA3B;AACA,SAASC,OAAT,QAAwB,yBAAxB;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,QAAnC,EAA6CC,MAA7C,EAAqDC,QAArD,EAA+D;EAC5EF,QAAQ,CAACG,MAAT,CAAgBT,kBAAhB,EAAoC,IAApC;EAEA,KAAKU,UAAL,CAAgB,cAAhB,EAAgC,UAASC,KAAT,EAAgB;IAC9C,IAAIC,OAAO,GAAGD,KAAK,CAACC,OAApB;IAAA,IACIC,KAAK,GAAGD,OAAO,CAACC,KADpB;IAAA,IAEIC,OAAO,GAAGD,KAAK,CAACE,cAFpB;;IAIA,IAAIZ,OAAO,CAACU,KAAD,CAAX,EAAoB;MAClB;IACD;;IAED,IAAIZ,EAAE,CAACY,KAAD,EAAQ,kBAAR,CAAF,IAAiCX,UAAU,CAACW,KAAD,CAA/C,EAAwD;MACtDN,MAAM,CAACS,GAAP,CAAWC,OAAX,CAAmBH,OAAO,CAACI,UAAR,CAAmBC,EAAtC;IACD;;IAEDX,QAAQ,CAACY,SAAT,CAAmBN,OAAO,CAACK,EAA3B,EAA+BL,OAA/B;EACD,CAdD;EAiBA,KAAKJ,UAAL,CAAgB,mBAAhB,EAAqC,UAASC,KAAT,EAAgB;IACnD,IAAIC,OAAO,GAAGD,KAAK,CAACC,OAApB;IAAA,IACIS,UAAU,GAAGT,OAAO,CAACS,UADzB;IAAA,IAEIC,YAAY,GAAGD,UAAU,CAACN,cAF9B;IAIAP,QAAQ,CAACY,SAAT,CAAmBE,YAAY,CAACH,EAAhC,EAAoCG,YAApC;EACD,CAND;EAQA,KAAKZ,UAAL,CAAgB,mBAAhB,EAAqC,YAAW;IAC9C,IAAIa,WAAW,GAAGlB,MAAM,CAACmB,cAAP,EAAlB;IAAA,IACIC,aAAa,GAAGF,WAAW,CAACR,cADhC;;IAGA,IAAId,EAAE,CAACsB,WAAD,EAAc,oBAAd,CAAN,EAA2C;MACzChB,MAAM,CAACS,GAAP,CAAWC,OAAX,CAAmBQ,aAAa,CAACN,EAAjC;IACD;EACF,CAPD;AAQD;AAEDpB,QAAQ,CAACK,iBAAD,EAAoBJ,kBAApB,CAAR;AAEAI,iBAAiB,CAACsB,OAAlB,GAA4B,CAAE,QAAF,EAAY,UAAZ,EAAwB,QAAxB,EAAkC,UAAlC,CAA5B"},"metadata":{},"sourceType":"module"}